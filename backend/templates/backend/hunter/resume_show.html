<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>人才招聘</title>

	<link href="https://fonts.googleapis.com/css?family=Roboto+Slab:400,300,700|Roboto:300,400" rel="stylesheet" type="text/css">

{#	<!-- Animate.css -->#}
	<link rel="stylesheet" href="/static/css/animate.css">
{#	<!-- Icomoon Icon Fonts-->#}
	<link rel="stylesheet" href="/static/css/icomoon.css">
{#	<!-- Bootstrap  -->#}
	<link rel="stylesheet" href="/static/css/bootstrap.css">
{##}
	<link rel="stylesheet" href="/static/css/style.css">

    <link rel="shortcut icon" href="/static/favicon.ico" type="image/x-icon" />
    <script src="/static/jquery-3.4.1.min.js"></script>
    <script src="/static/vue.js"></script>
    <script src="http://apps.bdimg.com/libs/jquery.cookie/1.4.1/jquery.cookie.js"></script>
    <link href="//cdn.bootcss.com/toastr.js/latest/css/toastr.min.css" rel="stylesheet">
    <script src="//cdn.bootcss.com/toastr.js/latest/js/toastr.min.js"></script>
    <script src="https://cdn.staticfile.org/vue/2.2.2/vue.min.js"></script>
    <script src="https://cdn.staticfile.org/vue-resource/1.5.1/vue-resource.min.js"></script>
    <!-- 导入 CSS 样式 -->
    <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
    <!-- 导入Vue -->
    <script src="https://unpkg.com/vue/dist/vue.js"></script>
    <!-- 引入组件库 -->
    <script src="https://unpkg.com/element-ui/lib/index.js"></script>
     <style>
      .demo-table-expand {
        font-size: 0;
      }
      .demo-table-expand label {
        width: 120px;
        color: #99a9bf;
      }
      .demo-table-expand .el-form-item {
        margin-right: 0;
        margin-bottom: 0;
        width: 50%;
      }
        .avatar-uploader .el-upload {
    border: 1px dashed #d9d9d9;
    border-radius: 6px;
    cursor: pointer;
    position: relative;
    overflow: hidden;
  }
  .avatar-uploader .el-upload:hover {
    border-color: #409EFF;
  }
  .avatar-uploader-icon {
    font-size: 28px;
    color: #8c939d;
    width: 178px;
    height: 178px;
    line-height: 178px;
    text-align: center;
  }
  .avatar {
    width: 178px;
    height: 178px;
    display: block;
  }


    </style>
	</head>
    <body>
	<div class="box-wrap">
		<header role="banner" id="fh5co-header">
			<div class="container">
				<nav class="navbar navbar-default">
					<div class="row">
						<div class="col-md-3">
							<div class="fh5co-navbar-brand">
								<a class="fh5co-logo" href="index.html"><img src="/static/image/logo.png" alt="Closest Logo"></a>
							</div>
						</div>
						<div class="col-md-6">
                            <div id="nav">
                                <el-menu
                              :default-active="activeIndex2"
                              class="el-menu-demo"
                              mode="horizontal"
                              @select="handleSelect"
                              background-color="#ffffff"
                              text-color="#000000"
                              active-text-color="#6F00D2">
                                <el-menu-item index="1"><el-link href="/api/index/" icon="el-icon-s-home" type="primary">主页</el-link></el-menu-item>
                                <el-menu-item index="2" ><el-link href="/api/allPositionSearch" icon="el-icon-search">职位搜索</el-link></el-menu-item>
                                <el-menu-item index="3" > <el-link href="/api/resumeCenter" icon="el-icon-document">简历中心</el-link></el-menu-item>
                                <el-menu-item index="4" ><el-link href="/api/myDeliver/" icon="el-icon-s-promotion">投递反馈</el-link></el-menu-item>
                                <el-menu-item index="5" > <el-link href="/api/myCollect" icon="el-icon-star-on">我的收藏</el-link></el-menu-item>

                            </el-menu>
                        </div>
						</div>
						<div class="col-md-3">
                             <ul class="social">
                                <li><strong style="text-align: center;font-size:14px">{{ request.session.user_name }}</strong></li>
                                <li><a href="/api/resumeCenter/"><i class="el-icon-s-custom"></i></a></li>
                                <li><a href="/api/logout"><i class="el-icon-s-tools"></i></a></li>
                             </ul>
						</div>
					</div>
				</nav>
		  </div>
		</header>
		<!-- END: header -->
		<section id="work">
			<div class="container">
				<div class="row">
					<div class="col-md-12">
                        <div id="user">



{##}
{#</el-menu>#}

{#       <el-menu#}
{#  :default-active="activeIndex2"#}
{#  class="el-menu-demo"#}
{#  mode="horizontal"#}
{#  @select="handleSelect"#}
{#  background-color="#545c64"#}
{#  text-color="#fff"#}
{#  active-text-color="#ffd04b">#}
{#           <el-menu-item index="1">待处理事务</el-menu-item>#}
{#  <el-menu-item index="2">会员信息管理</el-menu-item>#}
{#    <el-menu-item index="3" >招聘信息管理</el-menu-item>#}
{#  <el-menu-item index="4" >网站公告管理</el-menu-item>#}
{#           <el-menu-item index="5" >友情链接管理</el-menu-item>#}
{#        <el-menu-item index="6" >数据分析</el-menu-item>#}
{#</el-menu>#}
            <h2>个人信息</h2>
        <el-button type="primary" icon="el-icon-edit" circle @click="editUser"></el-button>
            <el-table :data="user" style="width: 100%" v-loading="loadingUserTable" element-loading-text="拼命加载中" element-loading-spinner="el-icon-loading" element-loading-background="rgba(0, 0, 0, 0.8)" empty-text="完善简历，让HR更了解你！">
                <el-table-column >
                    <template slot-scope="props" >

                            <el-upload  class="avatar-uploader"  action="http://localhost:8000/api/photoUpload/"   :show-file-list="false"   :on-success="handleAvatarSuccess"   :before-upload="beforeAvatarUpload">
                                      <img v-if="photo" :src="photo" class="avatar">
{#                                      <i v-if="photo" class="el-icon-plus avatar-uploader-icon"></i>#}
                                    </el-upload>

{#                                <el-input type="text" name="photo" placeholder="请输入手机号" class="form-control" auto-complete="off" v-model="UserForm.photo"></el-input>#}

                        <el-form label-position="left" inline class="demo-table-expand" v-show="isShowUser">
                            <el-form-item >
                                <i class="el-icon-user-solid"></i>
                                <span>[[ props.row.user_name ]] </span>
                            </el-form-item>
{#                                 <el-form-item label="photo">#}
{#                                    <el-avatar shape="square"  :src="props.row.photo"></el-avatar>#}
{#                                <span>[[props.row.photo ]]</span>#}
{#                              </el-form-item>#}
                            <el-form-item >
                                <i class="el-icon-message"></i>
                                <span>[[ props.row.user_email ]]</span>
                            </el-form-item>
                            <el-form-item >
                                <i class="el-icon-mobile-phone"></i>
                                <span>[[props.row.user_phone ]]</span>
                            </el-form-item>
                            <el-form-item label="性别">
                                <span>[[ props.row.sex ]]</span>
                            </el-form-item>
                            <el-form-item label="生日">
                                <span>[[ props.row.birthday ]]</span>
                            </el-form-item>
                            <el-form-item label="所在城市">
                                <span>[[props.row.city ]]</span>
                            </el-form-item>
                            <el-form-item label="通讯地址">
                                <span>[[props.row.Correspondence_address ]]</span>
                            </el-form-item>
                            <el-form-item label="户口所在地">
                                <span>[[props.row.registered_permanent_residence ]]</span>
                            </el-form-item>
                            <el-form-item label="学历">
                                <span>[[props.row.education_background ]]</span>
                            </el-form-item>
                            <el-form-item label="qq">
                                <span>[[props.row.qq ]]</span>
                            </el-form-item>
                            <el-form-item label="上次登录时间">

                                <span>[[ props.row.last_login_time ]] </span>
                            </el-form-item>
                            <el-form-item label="上次登录ip">

                                <span>[[ props.row.ip]] </span>
                            </el-form-item>
                        </el-form>
                    </template>
                </el-table-column>

            </el-table>
            <el-form id="user_form_edit" :model="UserForm" :rules="rules" ref="UserForm" label-width="80px" v-show="isShowUserEdit">
                    <el-form-item label="姓名" prop="user_name">
                        <el-input type="text" name="user_name" placeholder="请输入姓名" class="form-control" auto-complete="off" v-model="UserForm.user_name"></el-input>
                    </el-form-item>
                    <el-form-item label="邮箱" prop="user_email">
                        <el-input type="text" name="user_email" placeholder="请输入邮箱" class="form-control" auto-complete="off" v-model="UserForm.user_email"></el-input>
                    </el-form-item>
                    <el-form-item label="手机号" prop="user_phone">
                        <el-input type="text" name="user_phone" placeholder="请输入手机号" class="form-control" auto-complete="off" v-model="UserForm.user_phone"></el-input>
                    </el-form-item>
                    <el-form-item label="性别" prop="sex">
{#                        v-model的属性值是label绑定的值#}
                        <el-radio v-model="UserForm.sex" label="0">男</el-radio>
                        <el-radio v-model="UserForm.sex" label="1">女</el-radio>
                    </el-form-item>
                    <el-form-item label="生日" prop="birthday">
                        <el-date-picker v-model="UserForm.birthday"  type="date" placeholder="选择出生日期" value-format="yyyy-MM-dd"></el-date-picker>
                    </el-form-item>
                    <el-form-item label="所在城市" prop="city">
                        <el-input type="text" name="city" placeholder="请输入所在城市" class="form-control" auto-complete="off" v-model="UserForm.city"></el-input>
                    </el-form-item>
                    <el-form-item label="通讯地址" prop="Correspondence_address">
                        <el-input type="text" name="Correspondence_address" placeholder="请输入通讯地址" class="form-control" auto-complete="off" v-model="UserForm.Correspondence_address"></el-input>
                    </el-form-item>
                    <el-form-item label="户口所在地" prop="registered_permanent_residence">
                        <el-input type="text" name="registered_permanent_residence" placeholder="请输入户口所在地" class="form-control" auto-complete="off" v-model="UserForm.registered_permanent_residence"></el-input>
                    </el-form-item>
                    <el-form-item label="qq" prop="qq">
                        <el-input type="text" name="qq" placeholder="请输入qq" class="form-control" auto-complete="off" v-model="UserForm.qq"></el-input>
                    </el-form-item>
                    <el-form-item label="学历" prop="education_background">
                                 <el-select v-model="UserForm.education_background" placeholder="请选择学历">
                        <el-option label="专科" value="专科"></el-option>
                        <el-option label="本科" value="本科"></el-option>
                        <el-option label="硕士" value="硕士"></el-option>
                        <el-option label="博士" value="博士"></el-option>
                        <el-option label="其他" value="其他"></el-option>
                  </el-select> </el-form-item>
                <el-form-item>
                    <el-button icon="el-icon-circle-plus" type="primary" class="btn btn-info" @click="editOrAddUser('UserForm')" >保存</el-button>
                    <el-button type="info" class="btn btn-info" @click="cancelEditOrAddUser" >取消</el-button>
                </el-form-item >
            </el-form>
    </div>
                        <div id="resume">
                                <h2>求职意向</h2>
                                <el-button type="primary" icon="el-icon-edit" circle @click="editResume"></el-button>
                                    <el-table :data="resume" style="width: 100%" v-loading="loadingResumeTable" element-loading-text="拼命加载中" element-loading-spinner="el-icon-loading" element-loading-background="rgba(0, 0, 0, 0.8)" empty-text="完善简历，让HR更了解你！">
                                        <el-table-column >
                                            <template slot-scope="props">
                                                <el-form label-position="left" inline class="demo-table-expand" v-show="isShowResume">

                                                    <el-form-item label="期望职位地点">
                                                        <span>[[props.row.expected_work_city ]]</span>
                                                    </el-form-item>
                                                    <el-form-item label="期望职位" >
                                                        <span>[[props.row.desired_position ]]</span>
                                                    </el-form-item>
                                                    <el-form-item label="期望工资">
                                                        <span>[[props.row.expected_salary ]]元/月</span>
                                                    </el-form-item>
                                                    <el-form-item label="自我评价">
                                                        <span>[[props.row.self_assessment ]]</span>
                                                    </el-form-item>
                                                </el-form>
                                            </template>
                                        </el-table-column>
                                </el-table>
                            {#<a href={% url 'resume_editoradd' %} id="resume_editoradd">添加</a>#}
                    {#                <input type="button" id="resume_editoradd" value="添加">{% csrf_token %}#}
                                    <div id="resume_add" style="margin-left: 10px">
                                    <el-form id="resume_form_edit" :model="ResumeForm" :rules="rules" ref="ResumeForm" label-width="80px" v-show="isShowResumeEdit">

                    {#                    <el-form-item label="头像" prop="photo">#}
                    {#                            <el-upload  class="avatar-uploader"  action="https://jsonplaceholder.typicode.com/posts/"   :show-file-list="false"   :on-success="handleAvatarSuccess"   :before-upload="beforeAvatarUpload">#}
                    {#                                      <img v-if="ResumeForm.photo" :src="ResumeForm.photo" class="avatar">#}
                    {#                                      <i v-else class="el-icon-plus avatar-uploader-icon"></i>#}
                    {#                                    </el-upload>#}
                    {#                        <el-input type="text" name="photo" placeholder="请输入手机号" class="form-control" auto-complete="off" v-model="ResumeForm.photo"></el-input>#}
                    {#                    </el-form-item>#}
                                        <el-form-item label="期望职位地点" prop="expected_work_city">
                                            <el-input type="text" name="expected_work_city" placeholder="请输入期望职位地点" class="form-control" auto-complete="off" v-model="ResumeForm.expected_work_city"></el-input>
                                        </el-form-item>
                                        <el-form-item label="期望职位" prop="desired_position">
                                            <el-input type="text" name="desired_position" placeholder="请输入期望职位" class="form-control" auto-complete="off" v-model="ResumeForm.desired_position"></el-input>
                                        </el-form-item>
                                        <el-form-item label="期望工资（月薪）" prop="expected_salary">
                                            <el-select v-model="ResumeForm.expected_salary" placeholder="请选择期望工资">
                                                <el-option label="3000-3999" value="3000-3999"></el-option>
                                                <el-option label="4000-5999" value="4000-5999"></el-option>
                                                <el-option label="6000-7999" value="6000-7999"></el-option>
                                                <el-option label="8000-9999" value="8000-9999"></el-option>
                                                <el-option label="10000-150000" value="10000-150000"></el-option>
                                '           </el-select>
                                        </el-form-item >
                                        <el-form-item label="自我评价" prop="self_assessment">
                                            <el-input type="textarea" name="self_assessment" placeholder="请输入自我评价" class="form-control" auto-complete="off" v-model="ResumeForm.self_assessment"></el-input>
                                        </el-form-item>
                                        <el-form-item>
                                            <el-button icon="el-icon-circle-plus" type="primary" class="btn btn-info" @click="editOrAddResume('ResumeForm')" >保存</el-button>
                                            <el-button type="info" class="btn btn-info" @click="cancelEditOrAddResume" >取消</el-button>
                                        </el-form-item >
                                    </el-form>
                                </div>
                            </div>
                        <div>
                            <div id="education_experience">


                            <h2>教育背景</h2>

                    {#            <a href={% url 'resume_editoradd' %}>&nbsp>编辑</a>#}
                            {#    <a href={% url 'education_experience_edit' %}>+添加</a>#}

                                    <div id="new_education_experience">
                                         <el-button icon="el-icon-circle-plus" type="primary" @click="add('a-component')" v-show="isShow">+新建</el-button>
                                        <ul>
{#                                            :dataarr="options"#}
                                             <li :is="item.component"  @input="ad" @cancle="remove" v-for="item in items" :key="item.value"></li>
                                        </ul>
                                        {#        <div :is="item.component"  @click.native="addd" v-for="item in itemsa"></div>#}
                                        {#        <div :is="item.component"  @click.native="remove()" v-for="item in itemsb"></div>#}

                                    </div>

                                {#            {% if education_experience_form_list%}#}
                        {#                {% for education_experience,education_experience_form in zip1%}#}
                        {#                    <div id="education_experience_{{ education_experience.id }}">#}
                        {#                        <div id="education_experience_content_{{ education_experience.id }}">#}
                                    {#            {{ education_experience.id }}#}
                        {#                            {{ education_experience_form_list.forloop.counter0}}&nbsp#}
                        {#                            {{ education_experience_form.school_name}}#}
                        {#                            {{ education_experience_form.enrollment_time}}#}
                        {#                            {{ education_experience_form.graduation_time}}#}
                        {#                            {{ education_experience_form.education_background}}#}
                        {#                            {{ education_experience_form.major}}#}
                        {#                            {{ education_experience_form.honor}}#}
                        {#                        </div>#}
                        {##}
                        {#                        <div id="education_experience_button_{{ education_experience.id }}">#}
                        {#                                 <button class="education_experience_edit" onclick="education_experience_edit({{  education_experience.id }})"> 编辑</button>#}
                        {#                                <button class="education_experience_delete" onclick="education_experience_del({{  education_experience.id }})"> 删除</button>#}
                        {#                        </div>#}
                        {#                    </div>#}
                        {#                {% endfor %}#}
                        {#            {% endif %}#}

                        {#        <table>#}
                        {#			<thead>#}
                        {#				<tr>#}
                        {#					<th>主键</th>#}
                        {#					<th>学校名称</th>#}
                        {#					<th>入学时间</th>#}
                        {#                    <th>毕业时间</th>#}
                        {#					<th>学历</th>#}
                        {#                    <th>专业</th>#}
                        {#                    <th>荣誉</th>#}
                        {#				</tr>#}
                        {#			</thead>#}
                        {#			<tbody>#}
                        {##}
                        {#				<tr ref="fruits" v-for="(education_experience,index) in education_experiences">#}
                        {##}
                        {#					<td>[[ education_experience.id ]]</td>#}
                        {#                    <td>[[ education_experience.school_name ]]</td>#}
                        {#					<td>[[ education_experience.enrollment_time ]]</td>#}
                        {#                    <td>[[ education_experience.graduation_time ]]</td>#}
                        {#                    <td>[[ education_experience.education_background ]]</td>#}
                        {#                    <td>[[ education_experience.major ]]</td>#}
                        {#                    <td>[[ education_experience.honor ]]</td>#}
                        {#					<td :class="'text-center'">#}
                        {##}
                        {#                            <el-button type="danger" icon="el-icon-delete" circle @click="deleteEducationExperience(index,education_experience.id)"></el-button>#}
                        {##}
                        {#                    </td>#}
                        {#                    <td :class="'text-center'"><button  @click="edit('d-component','b-component','c-component',index)">Edit</button></td>#}
                        {#                    <td :class="'text-center'"><el-button type="primary" icon="el-icon-edit" circle @click="edit(index,education_experience.id)"></el-button></td>#}
                        {##}
                        {#				</tr>#}
                        {#			</tbody>#}
                        {# <td :is="item.component"  :dataarr="education_experience[0]" v-for="item in itemsc"></td>#}
                        {#        <div :is="item.component"  @click.native="editEducationExperience" v-for="item in items_edit_save"></div>#}
                        {#        <div :is="item.component"  @click.native="remove_edit" v-for="item in items_edit_cancle"></div>#}
                        {##}
                        {#    </table>#}
                                    <div id="education_experience_table">
                                        <el-card class="box-card">
                                        <el-table :data="education_experiences"   style="width: 100%" v-loading="loadingEducationExperiencesTable" element-loading-text="拼命加载中"
                                    element-loading-spinner="el-icon-loading" element-loading-background="rgba(0, 0, 0, 0.8)" empty-text="完善简历，让HR更了解你！">
                                            <el-table-column type="expand">
                                          <template slot-scope="props">
                                            <el-form label-position="left" inline class="demo-table-expand">
                                              <el-form-item label="学校名称">
                                                <span>[[ props.row.school_name ]]</span>
                                              </el-form-item>
                                              <el-form-item label="入学时间">
                                                <span>[[props.row.enrollment_time ]]</span>
                                              </el-form-item>
                                              <el-form-item label="毕业时间">
                                                <span>[[ props.row.graduation_time ]]</span>
                                              </el-form-item>
                                              <el-form-item label="学历">
                                                <span>[[ props.row.education_background ]]</span>
                                              </el-form-item>
                                              <el-form-item label="专业">
                                                <span>[[ props.row.major ]]</span>
                                              </el-form-item>
                                              <el-form-item label="荣誉">
                                                <span>[[ props.row.honor ]]</span>
                                              </el-form-item>

                                            </el-form>
                                          </template>
                                        </el-table-column>
                                            <el-table-column
                                              label="学校名称"
                                              prop="school_name">
                                            </el-table-column>
                                            <el-table-column
                                              label="学历"
                                              prop="education_background">
                                            </el-table-column>
                                            <el-table-column
                                              label="专业"
                                              prop="major">
                                            </el-table-column>
                                            <el-table-column label="操作">
                                            <template slot-scope="scope">
                                            <el-button type="danger" icon="el-icon-delete" circle @click="deleteEducationExperience(scope.$index,scope.row.id)"></el-button>
                                            <el-button type="primary" icon="el-icon-edit" circle @click="edit(scope.$index,scope.row.id)"></el-button>

                                            </template>
                                        </el-table-column>
                                        </el-table>
                                        </el-card>
                                    </div>

                                    <div id="education_experience_edit">
                                        <el-card class="box-card" v-if="isShow_Edit">
                                            <el-form id="education_experience_form_edit" label-width="80px">
                                                <h3>更改信息</h3>
                                                    <el-form-item label="学校名称">
                                                        <el-input type="text" name="school_name" placeholder="请输入姓名" class="form-control" auto-complete="off" v-model="old_school_name"></el-input>
                                                    </el-form-item>
                                                     <el-form-item label="入学时间">
                                {#                             picker-options的值是一个对象,他的disabledDate属性可以设置禁用日期#}
                                {#	    				<input type="text" name="enrollment_time" placeholder= "dd-mm-yy" class="form-control" v-model="old_enrollment_time"/>#}
                                                        <el-date-picker v-model="selectEnrollmentTime" :picker-options="pickerOptionsStart" type="date" placeholder="选择日" value-format="yyyy-MM-dd"></el-date-picker>
                                                    </el-form-item>
                                                    <el-form-item label="毕业时间">
                                {#	    				<input type="text" name="graduation_time" placeholder= "dd-mm-yy" class="form-control" v-model="old_graduation_time"/>#}
                                                        <el-date-picker v-model="selectGraduationTime" :picker-options="pickerOptionsEnd" type="date" placeholder="选择日" value-format="yyyy-MM-dd"></el-date-picker>
                                                    </el-form-item >
                                                    <el-form-item label="学历">
                                {#	    				    <el-input type="text" name="education_background" placeholder="请输入姓名" class="form-control" v-model="old_education_background"/>#}
                                                        <el-select v-model="old_education_background" placeholder="请选择">
                                                            <el-option
                                                              v-for="item in options"
                                                              :key="item.value"
                                                              :label="item.label"
                                                              :value="item.value">
                                                            </el-option>
                                                          </el-select>
                                                    </el-form-item >
                                                    <el-form-item label="专业">
                                                        <el-input type="text" name="major" placeholder="请输入姓名" class="form-control" v-model="old_major"/>
                                                    </el-form-item >
                                                    <el-form-item label="荣誉">
                                                        <el-input type="textarea" name="honor" placeholder="请输入姓名" class="form-control" v-model="old_honor"/>
                                                    </el-form-item >
                                                    <el-form-item>
                                                        <el-button icon="el-icon-circle-plus" type="primary" class="btn btn-info" type="button" @click="editEducationExperience">保存</el-button>
                                                        <el-button type="info" class="btn btn-info" type="button" @click="cancleEdit">取消</el-button>
                                                    </el-form-item >
                                                </el-form>
                                        </el-card>
                                    </div>
                                </div>
                        </div>
                        <div>
                            <div id="work_experience">


                            <h2>工作经历</h2>

                    {#            <a href={% url 'resume_editoradd' %}>&nbsp>编辑</a>#}
                            {#    <a href={% url 'education_experience_edit' %}>+添加</a>#}

                                    <div id="new_work_experience">
                                         <el-button icon="el-icon-circle-plus" type="primary" @click="add('b-component')" v-show="isShow">+新建</el-button>
                                        <ul>
{#                                            :dataarr="options"#}
                                             <li :is="item.component"  @input="ad" @cancle="remove" v-for="item in items" :key="item.value"></li>
                                        </ul>

                                    </div>

                                    <div id="work_experience_table">
                                        <el-card class="box-card">
                                        <el-table :data="work_experiences"   style="width: 100%" v-loading="loadingWorkExperiencesTable" element-loading-text="拼命加载中"
                                    element-loading-spinner="el-icon-loading" element-loading-background="rgba(0, 0, 0, 0.8)" empty-text="完善简历，让HR更了解你！">
                                            <el-table-column type="expand">
                                          <template slot-scope="props">
                                            <el-form label-position="left" inline class="demo-table-expand">
                                              <el-form-item label="公司名称">
                                                <span>[[ props.row.company_name ]]</span>
                                              </el-form-item>
                                              <el-form-item label="入职时间">
                                                <span>[[props.row.entry_time ]]</span>
                                              </el-form-item>
                                              <el-form-item label="离职时间">
                                                <span>[[ props.row.dismission_time ]]</span>
                                              </el-form-item>
                                              <el-form-item label="职业名称">
                                                <span>[[ props.row.position_name ]]</span>
                                              </el-form-item>
                                              <el-form-item label="部门">
                                                <span>[[ props.row.department ]]</span>
                                              </el-form-item>
                                              <el-form-item label="荣誉">
                                                <span>[[ props.row.position_type ]]</span>
                                              </el-form-item>
                                              <el-form-item label="工作描述">
                                                <span>[[ props.row.position_description ]]</span>
                                              </el-form-item>
                                            </el-form>
                                          </template>
                                        </el-table-column>
                                            <el-table-column
                                              label="公司名称"
                                              prop="company_name">
                                            </el-table-column>
                                            <el-table-column
                                              label="职位名称"
                                              prop="position_name">
                                            </el-table-column>
                                            <el-table-column
                                              label="工作类型"
                                              prop="position_type">
                                            </el-table-column>
                                            <el-table-column label="操作">
                                            <template slot-scope="scope">
                                            <el-button type="danger" icon="el-icon-delete" circle @click="deleteWorkExperience(scope.$index,scope.row.id)"></el-button>
                                            <el-button type="primary" icon="el-icon-edit" circle @click="edit(scope.$index,scope.row.id)"></el-button>

                                            </template>
                                        </el-table-column>
                                        </el-table>
                                        </el-card>
                                    </div>

                                    <div id="work_experience_edit">
                                        <el-card class="box-card" v-if="isShow_Edit">
                                            <el-form id="work_experience_form_edit" label-width="80px">
                                                <h3>更改信息</h3>
                                                    <el-form-item label="公司名称">
                                                        <el-input type="text" placeholder="请输入公司名称" class="form-control" auto-complete="off" v-model="old_company_name"></el-input>
                                                    </el-form-item>
                                                     <el-form-item label="入职时间">
                                {#                             picker-options的值是一个对象,他的disabledDate属性可以设置禁用日期#}
                                {#	    				<input type="text" name="enrollment_time" placeholder= "dd-mm-yy" class="form-control" v-model="old_enrollment_time"/>#}
                                                        <el-date-picker v-model="old_entry_time" :picker-options="pickerOptionsStart" type="date" placeholder="选择入职时间" value-format="yyyy-MM-dd"></el-date-picker>
                                                    </el-form-item>
                                                    <el-form-item label="离职时间">
                                {#	    				<input type="text" name="graduation_time" placeholder= "dd-mm-yy" class="form-control" v-model="old_graduation_time"/>#}
                                                        <el-date-picker v-model="old_dismission_time" :picker-options="pickerOptionsEnd" type="date" placeholder="选择离职时间" value-format="yyyy-MM-dd"></el-date-picker>
                                                    </el-form-item >
                                                    <el-form-item label="职位名称">
                                {#	    				    <el-input type="text" name="education_background" placeholder="请输入姓名" class="form-control" v-model="old_education_background"/>#}
                                                        <el-input type="text" placeholder="请输入职位名称" class="form-control" v-model="old_position_name"/>

                                                    </el-form-item >
                                                    <el-form-item label="部门">
                                                        <el-input type="text" placeholder="请输入部门" class="form-control" v-model="old_department"/>
                                                    </el-form-item >
                                                    <el-form-item label="工作类型">
                                                        <el-input type="text"  placeholder="请输入工作类型" class="form-control" v-model="old_position_type"/>
                                                    </el-form-item >
                                                    <el-form-item label="工作描述">
                                                        <el-input type="textarea" placeholder="请输入工作描述" class="form-control" v-model="old_position_description"/>
                                                    </el-form-item >
                                                    <el-form-item>
                                                        <el-button icon="el-icon-circle-plus" type="primary" class="btn btn-info" type="button" @click="editWorkExperience">保存</el-button>
                                                        <el-button type="info" class="btn btn-info" type="button" @click="cancleEdit">取消</el-button>
                                                    </el-form-item >
                                                </el-form>
                                        </el-card>
                                    </div>
                                </div>
                        </div>
                        <div>
                            <div id="project_experience">


                            <h2>项目经历</h2>
                                    <div id="new_project_experience">
                                         <el-button icon="el-icon-circle-plus" type="primary" @click="add('c-component')" v-show="isShow">+新建</el-button>
                                        <ul>
                                             <li :is="item.component"  @input="ad" @cancle="remove" v-for="item in items" :key="item.value"></li>
                                        </ul>

                                    </div>

                                    <div id="project_experience_table">
                                        <el-card class="box-card">
                                        <el-table :data="project_experiences"   style="width: 100%" v-loading="loadingProjectExperiencesTable" element-loading-text="拼命加载中"
                                    element-loading-spinner="el-icon-loading" element-loading-background="rgba(0, 0, 0, 0.8)" empty-text="完善简历，让HR更了解你！">
                                            <el-table-column type="expand">
                                          <template slot-scope="props">
                                            <el-form label-position="left" inline class="demo-table-expand">
                                              <el-form-item label="项目名称">
                                                <span>[[ props.row.project_name ]]</span>
                                              </el-form-item>
                                              <el-form-item label="开始时间">
                                                <span>[[props.row.start_time ]]</span>
                                              </el-form-item>
                                              <el-form-item label="结束时间">
                                                <span>[[ props.row.end_time ]]</span>
                                              </el-form-item>
                                              <el-form-item label="项目描述">
                                                <span>[[ props.row.project_description ]]</span>
                                              </el-form-item>
                                              <el-form-item label="专业">
                                                <span>[[ props.row.department ]]</span>
                                              </el-form-item>
                                              <el-form-item label="所属机构">
                                                <span>[[ props.row.institution ]]</span>
                                              </el-form-item>
                                              <el-form-item label="责任描述">
                                                <span>[[ props.row.duty_description]]</span>
                                              </el-form-item>
                                            </el-form>
                                          </template>
                                        </el-table-column>
                                            <el-table-column
                                              label="项目名称"
                                              prop="project_name">
                                            </el-table-column>
                                            <el-table-column
                                              label="项目描述"
                                              prop="project_description">
                                            </el-table-column>
                                            <el-table-column
                                              label="责任描述"
                                              prop="duty_description">
                                            </el-table-column>
                                            <el-table-column label="操作">
                                            <template slot-scope="scope">
                                            <el-button type="danger" icon="el-icon-delete" circle @click="deleteProjectExperience(scope.$index,scope.row.id)"></el-button>
                                            <el-button type="primary" icon="el-icon-edit" circle @click="edit(scope.$index,scope.row.id)"></el-button>

                                            </template>
                                        </el-table-column>
                                        </el-table>
                                        </el-card>
                                    </div>

                                    <div id="project_experience_edit">
                                        <el-card class="box-card" v-if="isShow_Edit">
                                            <el-form id="project_experience_form_edit" label-width="80px">
                                                <h3>更改信息</h3>
                                                    <el-form-item label="项目名称">
                                                        <el-input type="text" placeholder="请输入项目名称" class="form-control" auto-complete="off" v-model="old_project_name"></el-input>
                                                    </el-form-item>
                                                     <el-form-item label="开始时间">
                                {#                             picker-options的值是一个对象,他的disabledDate属性可以设置禁用日期#}
                                {#	    				<input type="text" name="enrollment_time" placeholder= "dd-mm-yy" class="form-control" v-model="old_enrollment_time"/>#}
                                                        <el-date-picker v-model="old_start_time" :picker-options="pickerOptionsStart" type="date" placeholder="选择开始时间" value-format="yyyy-MM-dd"></el-date-picker>
                                                    </el-form-item>
                                                    <el-form-item label="结束时间">
                                {#	    				<input type="text" name="graduation_time" placeholder= "dd-mm-yy" class="form-control" v-model="old_graduation_time"/>#}
                                                        <el-date-picker v-model="old_end_time" :picker-options="pickerOptionsEnd" type="date" placeholder="选择结束时间" value-format="yyyy-MM-dd"></el-date-picker>
                                                    </el-form-item >
                                                    <el-form-item label="项目描述">
                                {#	    				    <el-input type="text" name="education_background" placeholder="请输入姓名" class="form-control" v-model="old_education_background"/>#}
                                                         <el-input type="textarea" placeholder="请输入项目描述" class="form-control" v-model="old_project_description"/>

                                                    </el-form-item >

                                                    <el-form-item label="所属机构">
                                                        <el-input type="text"  placeholder="请输入所属机构" class="form-control" v-model="old_institution"/>
                                                    </el-form-item >
                                                    <el-form-item label="责任描述">
                                                        <el-input type="textarea" placeholder="请输入责任描述" class="form-control" v-model="old_duty_description"/>
                                                    </el-form-item >
                                                    <el-form-item>
                                                        <el-button icon="el-icon-circle-plus" type="primary" class="btn btn-info" type="button" @click="editProjectExperience">保存</el-button>
                                                        <el-button type="info" class="btn btn-info" type="button" @click="cancleEdit">取消</el-button>
                                                    </el-form-item >
                                                </el-form>
                                        </el-card>
                                    </div>
                                </div>
                        </div>
					</div>
				</div>
			</div>
		</section>
	</div>
    <script>

        //提示框
        {#toastr.options = { // toastr配置#}
        {#    "closeButton": true, //是否显示关闭按钮#}
        {#    "debug": false, //是否使用debug模式#}
        {#    "progressBar": true, //是否显示进度条，当为false时候不显示；当为true时候，显示进度条，当进度条缩短到0时候，消息通知弹窗消失#}
        {#    "positionClass": "toast-top-center",//显示的动画时间#}
        {#    "showDuration": "400", //显示的动画时间#}
        {#    "hideDuration": "1000", //消失的动画时间#}
        {#    "timeOut": "7000", //展现时间#}
        {#    "extendedTimeOut": "1000", //加长展示时间#}
        {#    "showEasing": "swing", //显示时的动画缓冲方式#}
        {#    "hideEasing": "linear", //消失时的动画缓冲方式#}
        {#    "showMethod": "fadeIn", //显示时的动画方式#}
        {#    "hideMethod": "fadeOut" //消失时的动画方式#}
        //新建教育经历子组件
        var AComponent = Vue.extend({
            props: [
                'dataarr'],
            data(){
                return{
                    Form: {
                        school_name:'',
                        enrollment_time: '',
                        graduation_time: '',
                        education_background: '',
                        major:'',
                        honor:'',
                    },
                    rules:{
                         school_name: [
                                        { required: true, message: '请填写学校名称', trigger: 'blur' },
                                        { min: 4, message: '长度大于4个字符', trigger: 'blur' }
                                      ],
                          enrollment_time: [
                                         { type: 'string',required: true, message: '请选择入学日期', trigger: 'change' }
                          ],
                          graduation_time: [
                                        { type: 'string', required: true, message: '请选择毕业日期', trigger: 'change' }
                          ],

                          education_background: [
                                        { required: true, message: '请选择学历', trigger: 'change' }
                          ],
                          major: [
                                        { required: true, message: '请填写专业', trigger: 'blur'}
                          ],
                        honor: [
                                         { required: true, message: '请填写荣誉，可写暂无', trigger: 'blur' },
                            {  max: 200, message: '最多输入200位字符', trigger: 'blur' }
                          ],

                    },
                    pickerOptionsStart: {
                         disabledDate: time => {
                             // disabledDate是一个函数,参数是当前选中的日期值,这个函数需要返回一个Boolean值,
                             if (this.Form.graduation_time) {
                                 return time.getTime() > new Date(this.Form.graduation_time).getTime()
                             }
                         }
                     },
                     pickerOptionsEnd: {
                         disabledDate: time => {
                             if (this.Form.enrollment_time) {
                                 //getTime1970年1月1日 00:00:00 UTC到当前时间的毫秒数,减8.64e7的作用是,让今天的日期可以选择
                                 return time.getTime() < new Date(this.Form.enrollment_time).getTime()- 86400000
                             }
                         }
                     },

                }
            },
            template: '<el-card class="box-card"><el-form :model="Form" :rules="rules" ref="Form" label-width="80px" size=" small">' +
       '<el-form-item label="学校名称" prop="school_name">   <el-input v-model="Form.school_name" type="text" name="school_name" placeholder="请填写学校名称"> </el-input> </el-form-item>     ' +
                '   <el-form-item label="入学时间" prop="enrollment_time">  <el-date-picker v-model="Form.enrollment_time" :picker-options="pickerOptionsStart" type="date" placeholder="请选择入学日期"  value-format="yyyy-MM-dd"></el-date-picker></el-form-item > ' +
                '<el-form-item label="毕业时间" prop="graduation_time">   <el-date-picker  v-model="Form.graduation_time" :picker-options="pickerOptionsEnd" type="date" placeholder="请选择毕业日期"  value-format="yyyy-MM-dd"></el-date-picker> </el-form-item >' +
                ' <el-form-item label="学历" prop="education_background">       <el-select v-model="Form.education_background" placeholder="请选择学历">\n' +
                '      <el-option label="专科" value="专科"></el-option>' +
                '      <el-option label="本科" value="本科"></el-option><el-option label="硕士" value="硕士"></el-option><el-option label="博士" value="博士"></el-option><el-option label="其他" value="其他"></el-option>' +
                '    </el-select> </el-form-item >' +
                ' <el-form-item label="专业" prop="major">   <el-input v-model="Form.major" type="text" name="major" placeholder="请填写专业"> </el-input>          </el-form-item > ' +
                '   <el-form-item label="荣誉" prop="honor">  <el-input v-model="Form.honor" type="text" name="honor" placeholder="请填写荣誉">   </el-input>    </el-form-item >'+
      '<el-button ref="input" icon="el-icon-circle-plus" type="primary"  @click="doThis(\'Form\')">添加</el-button><el-button type="info"  @click="cancle">取消</el-button>' +
                '</el-form></el-card>',

            methods: {
                doThis(formName) {
                    this.$refs[formName].validate((valid) => {
                      if (valid) {
                        {#alert('submit!');#}
                        this.$emit('input',this.Form.school_name,this.Form.enrollment_time,this.Form.graduation_time,this.Form.education_background,this.Form.major,this.Form.honor);

                      } else {
                        console.log('error submit!!');
                        return false;
                      }
                    });

                },

                cancle()
                {
                    this.$emit('cancle');
                },

            },
            delimiters: ['[[', ']]']//Django模板与Vue.js 冲突/ 这句可以指定 {[ ]} 为插值表达式的新符号

        })
        var BComponent = Vue.extend({
            props: [
                'dataarr'],
            data(){
                return{
                    Form: {
                        company_name:'',
                        entry_time: '',
                        dismission_time: '',
                        position_name: '',
                        department:'',
                        position_type:'',
                        position_description:'',
                    },
                    rules:{
                         company_name: [
                                        { required: true, message: '请填写公司名称', trigger: 'blur' },
                                      ],
                          entry_time: [
                                         { type: 'string',required: true, message: '请选择入职日期', trigger: 'change' }
                          ],
                          dismission_time: [
                                        { type: 'string', required: true, message: '请选择离职日期', trigger: 'change' }
                          ],
                          position_name:[
                                        { type: 'string', required: true, message: '请填写职位名称', trigger: 'change' }
                          ],

                          department: [
                                        { required: true, message: '请填写部门', trigger: 'blur' }
                          ],
                          position_type: [
                                        { required: true, message: '请选择工作类型', trigger: 'blur'}
                          ],
                        position_description: [
                                         { required: true, message: '请填写工作描述，可写暂无', trigger: 'blur' },
                            {  max: 200, message: '最多输入200位字符', trigger: 'blur' }
                          ],

                    },
                    pickerOptionsStart: {
                         disabledDate: time => {
                             // disabledDate是一个函数,参数是当前选中的日期值,这个函数需要返回一个Boolean值,
                             if (this.Form.dismission_time) {
                                 return time.getTime() > new Date(this.Form.dismission_time).getTime()
                             }
                         }
                     },
                     pickerOptionsEnd: {
                         disabledDate: time => {
                             if (this.Form.entry_time) {
                                 //getTime1970年1月1日 00:00:00 UTC到当前时间的毫秒数,减8.64e7的作用是,让今天的日期可以选择
                                 return time.getTime() < new Date(this.Form.entry_time).getTime()- 86400000
                             }
                         }
                     },

                }
            },
            template: '<el-card class="box-card"><el-form :model="Form" :rules="rules" ref="Form" label-width="80px" size=" small">' +
       '<el-form-item label="公司名称" prop="company_name">   <el-input v-model="Form.company_name" type="text" placeholder="请填写公司名称"> </el-input> </el-form-item>     ' +
                '   <el-form-item label="入职时间" prop="entry_time">  <el-date-picker v-model="Form.entry_time" :picker-options="pickerOptionsStart" type="date" placeholder="请选择入职日期"  value-format="yyyy-MM-dd"></el-date-picker></el-form-item > ' +
                '<el-form-item label="离职时间" prop="dismission_time">   <el-date-picker  v-model="Form.dismission_time" :picker-options="pickerOptionsEnd" type="date" placeholder="请选择离职日期"  value-format="yyyy-MM-dd"></el-date-picker> </el-form-item >' +
                ' <el-form-item label="职位名称" prop="position_name">   <el-input v-model="Form.position_name" type="text" placeholder="请填写公司名称"> </el-input>    </el-form-item >' +
                ' <el-form-item label="部门" prop="department">   <el-input v-model="Form.department" type="text" name="major" placeholder="请填写部门"> </el-input>          </el-form-item > ' +
                '   <el-form-item label="工作类型" prop="position_type">   <el-select v-model="Form.position_type" placeholder="请选择工作类型">\n' +
                '      <el-option label="全职" value="全职"></el-option>' +
                '      <el-option label="兼职" value="兼职"></el-option>' +
                '    </el-select></el-form-item ><el-form-item label="职位描述" prop="position_description">  <el-input v-model="Form.position_description" type="text" name="honor" placeholder="请填写职位描述">   </el-input>    </el-form-item >'+
      '<el-button ref="input" icon="el-icon-circle-plus" type="primary"  @click="doThis(\'Form\')">添加</el-button><el-button type="info"  @click="cancle">取消</el-button>' +
                '</el-form></el-card>',

            methods: {
                doThis(formName) {
                    this.$refs[formName].validate((valid) => {
                      if (valid) {
                        {#alert('submit!');#}
                        this.$emit('input',this.Form.company_name,this.Form.entry_time,this.Form.dismission_time,this.Form.position_name,this.Form.department,this.Form.position_type,this.Form.position_description);

                      } else {
                        console.log('error submit!!');
                        return false;
                      }
                    });

                },

                cancle()
                {
                    this.$emit('cancle');
                },

            },
            delimiters: ['[[', ']]']//Django模板与Vue.js 冲突/ 这句可以指定 {[ ]} 为插值表达式的新符号

        })
        var CComponent = Vue.extend({
            props: [
                'dataarr'],
            data(){
                return{
                    Form: {
                        project_name:'',
                        start_time: '',
                        end_time: '',
                        project_description: '',
                        institution:'',
                        duty_description:'',
                    },
                    rules:{
                         project_name: [
                                        { required: true, message: '请填写项目名称', trigger: 'blur' },
                                                                 ],
                          start_time: [
                                         { type: 'string',required: true, message: '请选择开始日期', trigger: 'change' }
                          ],
                          end_time: [
                                        { type: 'string', required: true, message: '请选择结束日期', trigger: 'change' }
                          ],

                          project_description: [
                              {  max: 200, message: '最多输入200位字符', trigger: 'blur' },
                                        { required: true, message: '请选择项目描述', trigger: 'blur' }
                          ],
                          institution: [
                                        { required: true, message: '请填写所属机构', trigger: 'blur'}
                          ],
                        duty_description: [
                            {  max: 200, message: '最多输入200位字符', trigger: 'blur' },
                                         { required: true, message: '请填写责任描述，可写暂无', trigger: 'blur' }
                          ],

                    },
                    pickerOptionsStart: {
                         disabledDate: time => {
                             // disabledDate是一个函数,参数是当前选中的日期值,这个函数需要返回一个Boolean值,
                             if (this.Form.end_time) {
                                 return time.getTime() > new Date(this.Form.end_time).getTime()
                             }
                         }
                     },
                     pickerOptionsEnd: {
                         disabledDate: time => {
                             if (this.Form.start_time) {
                                 //getTime1970年1月1日 00:00:00 UTC到当前时间的毫秒数,减8.64e7的作用是,让今天的日期可以选择
                                 return time.getTime() < new Date(this.Form.start_time).getTime()- 86400000
                             }
                         }
                     },

                }
            },
            template: '<el-card class="box-card"><el-form :model="Form" :rules="rules" ref="Form" label-width="80px" size=" small">' +
       '<el-form-item label="项目名称" prop="project_name">   <el-input v-model="Form.project_name" type="text" name="school_name" placeholder="请填写项目名称"> </el-input> </el-form-item>     ' +
                '   <el-form-item label="开始时间" prop="start_time">  <el-date-picker v-model="Form.start_time" :picker-options="pickerOptionsStart" type="date" placeholder="请选择开始日期"  value-format="yyyy-MM-dd"></el-date-picker></el-form-item > ' +
                '<el-form-item label="结束时间" prop="end_time">   <el-date-picker  v-model="Form.end_time" :picker-options="pickerOptionsEnd" type="date" placeholder="请选结束日期"  value-format="yyyy-MM-dd"></el-date-picker> </el-form-item >' +
                ' <el-form-item label="项目描述" prop="project_description">      <el-input v-model="Form.project_description" type="textarea" placeholder="请填写项目描述"> </el-input> </el-form-item >   ' +
                ' <el-form-item label="所属机构" prop="institution">   <el-input v-model="Form.institution" type="text" placeholder="请填写所属机构"> </el-input>          </el-form-item > ' +
                '   <el-form-item label="责任描述" prop="duty_description">  <el-input v-model="Form.duty_description" type="textarea" placeholder="请填写责任描述">   </el-input>    </el-form-item >'+
      '<el-button ref="input" icon="el-icon-circle-plus" type="primary"  @click="doThis(\'Form\')">添加</el-button><el-button type="info"  @click="cancle">取消</el-button>' +
                '</el-form></el-card>',

            methods: {
                doThis(formName) {
                    this.$refs[formName].validate((valid) => {
                      if (valid) {
                        {#alert('submit!');#}
                        this.$emit('input',this.Form.project_name,this.Form.start_time,this.Form.end_time,this.Form.project_description,this.Form.institution,this.Form.duty_description);

                      } else {
                        console.log('error submit!!');
                        return false;
                      }
                    });

                },

                cancle()
                {
                    this.$emit('cancle');
                },

            },
            delimiters: ['[[', ']]']//Django模板与Vue.js 冲突/ 这句可以指定 {[ ]} 为插值表达式的新符号

        })
        var navVue= new Vue({
            el:'#nav',
             data() {
          return {

            activeIndex2: '3'
          };
        },
        methods: {
          handleSelect(key, keyPath) {
            console.log(key, keyPath);
          }
        },
        })
        var userVue=new Vue({
            el:'#user',
            data()
            {

                var checkPhone = (rule, value, callback) => {
                        const phoneReg = /^1[3|4|5|7|8][0-9]{9}$/
                        if (!value) {
                          return callback(new Error('电话号码不能为空'))
                        }
                        setTimeout(() => {
                          // Number.isInteger是es6验证数字是否为整数的方法,但是我实际用的时候输入的数字总是识别成字符串
                          // 所以我就在前面加了一个+实现隐式转换

                          if (!Number.isInteger(+value)) {
                            callback(new Error('请输入数字值'))
                          } else {
                            if (phoneReg.test(value)) {
                              callback()
                            } else {
                              callback(new Error('电话号码格式不正确'))
                            }
                          }
                        }, 100)
                      }
                var checkEmail = (rule, value, callback) => {
                    const mailReg = /^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/
                    if (!value) {
                      return callback(new Error('邮箱不能为空'))
                    }
                    setTimeout(() => {
                      if (mailReg.test(value)) {
                        callback()
                      } else {
                        callback(new Error('请输入正确的邮箱格式'))
                      }
                    }, 100)
                  }
                return {
                    user: [],
                    photo:'',
                    UserForm: {
                        user_name: '',
                        user_email: '',
                        user_phone: '',
                        sex:'',
                        birthday:'',
                        city:'',
                        Correspondence_address:'',
                        registered_permanent_residence:'',
                        education_background:'',
                        qq:'',

                    },
                    rules: {
                        user_name: [
                            {required: true, message: '请填写学校名称', trigger: 'blur'},
                            {min: 2, max: 4, message: '长度为2-4个字符', trigger: 'blur'}
                        ],
                        user_phone: [      { validator: checkPhone, trigger: 'blur' }    ],
                        user_email: [      { validator: checkEmail, trigger: 'blur' }    ],
                        sex: [{required: true, message: '请选择性别', trigger: 'change'},],
                        birthday: [{required: true, message: '请选择生日', trigger: 'change'},],
                        city: [{required: true, message: '请填写所在城市', trigger: 'blur'},],
                        Correspondence_address:[{required: true, message: '请填写通讯地址', trigger: 'blur'},],
                        registered_permanent_residence:[{required: true, message: '请填写户口所在地', trigger: 'blur'},],
                        education_background:[{required: true, message: '请选择学历', trigger: 'change'},],
                        qq:[{required: true, message: '请填写学校名称', trigger: 'blur'},],
                    },
                     isShowUser: true,//用户信息
                     isShowUserEdit: false,//编辑用户表单
                     loadingUserTable: true,//加载用户信息
                     fullscreenLoading: true,//整页加载
                }
            },
            methods:{
                    editUser(){
                        this.isShowUser=false;
                        this.isShowUserEdit=true;
                        this.UserForm.user_name=this.user[0].user_name;
                        this.UserForm.user_email=this.user[0].user_email;
                        this.UserForm.user_phone=this.user[0].user_phone;
                          this.UserForm.sex = this.user[0].sex;
                            this.UserForm.birthday = this.user[0].birthday;
                            this.UserForm.city = this.user[0].city;
                            this.UserForm.Correspondence_address = this.user[0].Correspondence_address;
                            this.UserForm.registered_permanent_residence = this.user[0].registered_permanent_residence;
                            this.UserForm.education_background = this.user[0].education_background;
                            this.UserForm.qq = this.user[0].qq;
                            },
                    editOrAddUser(formName){
                         this.$refs[formName].validate((valid) => {
                              if (valid) {
                                  $.ajax({
                                      url:"/api/user_edit/"+userVue.user[0].id,
                                      type:"POST",
                                      headers:{"X-CSRFToken":$.cookie('csrftoken')},
                                      {#data: $('#education_experience_form_edit').serialize(),#}//提示错误
                                      {#data:vm.selected,#}
                                      data:{"user_email":userVue.UserForm.user_email,"user_name":userVue.UserForm.user_name,"user_phone":userVue.UserForm.user_phone,"sex":userVue.UserForm.sex,"birthday":userVue.UserForm.birthday,"city":userVue.UserForm.city,"Correspondence_address":userVue.UserForm.Correspondence_address,"registered_permanent_residence":userVue.UserForm.registered_permanent_residence,"education_background":userVue.UserForm.education_background,"qq":userVue.UserForm.qq,},
                                      dataType:'JSON',
                                      success:function (data) {
                                            if (data.status === "successful")
                                            {
                                                userVue.user[0].user_name=userVue.UserForm.user_name
                                                userVue.user[0].user_email=userVue.UserForm.user_email
                                                userVue.user[0].user_phone=userVue.UserForm.user_phone
                                                userVue.user[0].sex=userVue.UserForm.sex;
                                                     userVue.user[0].birthday=userVue.UserForm.birthday;
                                                     userVue.user[0].city=userVue.UserForm.city;
                                                     userVue.user[0].Correspondence_address=userVue.UserForm.Correspondence_address;
                                                     userVue.user[0].registered_permanent_residence=userVue.UserForm.registered_permanent_residence;
                                                     userVue.user[0].education_background=userVue.UserForm.education_background;
                                                     userVue.user[0].qq=userVue.UserForm.qq;
                                                     userVue.user[0].photo=userVue.UserForm.photo;

                                                userVue.isShowUser=true;
                                                userVue.isShowUserEdit=false;
                                                userVue.$message({type: 'success',message: "保存成功!"});

                                            }
                                            else {
                                                var error_list=JSON.parse(data.errs);
                                                console.log(error_list)
                                                var msg=''
                                                for (let key in error_list){
                                                   msg=msg+key+error_list[key][0].message+";"
                                                }
                                                userVue.$message.warning(msg);
                                            }
                                      }
                                  })

                              } else {
                                console.log('error submit!!');
                                return false;
                              }
                         });

                    },
                    cancelEditOrAddUser(){
                        this.isShowUser=true;
                        this.isShowUserEdit=false;
                    },
                    handleAvatarSuccess(res, file) {
                        this.UserForm.photo = URL.createObjectURL(file.raw);
                        vm.getList();
          },
          beforeAvatarUpload(file) {
                        console.log(file.type);
            const isJPG = file.type === 'image/jpeg';
            const isLt2M = file.size / 1024 / 1024 < 2;

            if (!isJPG) {
              this.$message.error('上传头像图片只能是 JPG 格式!');
            }
            if (!isLt2M) {
              this.$message.error('上传头像图片大小不能超过 2MB!');
            }
            return isJPG && isLt2M;
          }
            },
            delimiters: ['[[', ']]']


        })
        var resumeVue=new Vue({
            el:'#resume',
            data(){
                return{
                    resume:[],
                    loadingResumeTable:true,
                    ResumeForm:{
                        resume_name:'',
                        expected_work_city:'',
                        desired_position:'',
                        expected_salary:'',
                        self_assessment:'',
                    },
                     rules: {

                        expected_work_city:[{required: true, message: '请填写学校名称', trigger: 'blur'},],
                        desired_position:[{required: true, message: '请填写学校名称', trigger: 'blur'},],
                        expected_salary:[{required: true, message: '请填写学校名称', trigger: 'blur'},],
                        self_assessment:[{required: true, message: '请填写学校名称', trigger: 'blur'},],
                    },
                    isShowResume: true,//用户信息
                    isShowResumeEdit: false,//编辑用户表单


                }
            },
            methods:{
                    editResume(){
                        this.isShowResume=false;
                        this.isShowResumeEdit=true;
                        if(this.resume == "" || this.resume== null || this.resume == undefined) {
                                  }
                        else {
                            this.ResumeForm.resume_name = this.resume[0].resume_name;
                            this.ResumeForm.expected_work_city = this.resume[0].expected_work_city;
                            this.ResumeForm.desired_position = this.resume[0].desired_position;
                            this.ResumeForm.expected_salary = this.resume[0].expected_salary;
                            this.ResumeForm.self_assessment = this.resume[0].self_assessment;
                        }
                    },
                    editOrAddResume(formName){
                         this.$refs[formName].validate((valid) => {
                              if (valid) {
                                  {#if(this.resume == "" || this.resume== null || this.resume == undefined) {#}
                                       {#resumeVue.resume.push({id:resume[i].pk,sex:resume[i].fields.sex,birthday:resume[i].fields.birthday,city:resume[i].fields.city,Correspondence_address:resume[i].fields.Correspondence_address,registered_permanent_residence:resume[i].fields.registered_permanent_residence,education_background:resume[i].fields.education_background,qq:resume[i].fields.qq,photo:"/media/"+resume[i].fields.photo,expected_work_city:resume[i].fields.expected_work_city,desired_position:resume[i].fields.desired_position,expected_salary:resume[i].fields.expected_salary,self_assessment:resume[i].fields.self_assessment})#}
                                  {#    $.ajax({#}
                                  {#        url:"/api/resume_add/",#}
                                  {#        type:"POST",#}
                                  {#        headers:{"X-CSRFToken":$.cookie('csrftoken')},#}
                                          {#data: $('#education_experience_form_edit').serialize(),#}//提示错误
                                          {#data:vm.selected,#}
                                  {#        data:{"expected_work_city":resumeVue.ResumeForm.expected_work_city,"desired_position":resumeVue.ResumeForm.desired_position,"expected_salary":resumeVue.ResumeForm.expected_salary,"self_assessment":resumeVue.ResumeForm.self_assessment},#}
                                  {#        dataType:'JSON',#}
                                  {#        success:function (data) {#}
                                  {#            if (data.status === "successful")#}
                                  {#            {#}
                                  {#                var resume = JSON.parse(data.resume_list);#}
                                  {#               for (let i = 0; i < resume.length; i++) {#}
                                  {#                   resumeVue.resume.push({#}
                                  {#                       id: resume[i].pk,#}
                                  {#                       expected_work_city: resume[i].fields.expected_work_city,#}
                                  {#                       desired_position: resume[i].fields.desired_position,#}
                                  {#                       expected_salary: resume[i].fields.expected_salary,#}
                                  {#                       self_assessment: resume[i].fields.self_assessment,#}
                                  {##}
                                  {#                   })#}
                                  {#               }#}
                                  {##}
                                  {##}
                                                  {#resumeVue.resume[0].expected_work_city=resumeVue.ResumeForm.expected_work_city;#}
                                                  {#resumeVue.resume[0].desired_position=resumeVue.ResumeForm.desired_position;#}
                                                  {#resumeVue.resume[0].expected_salary=resumeVue.ResumeForm.expected_salary;#}
                                                  {#resumeVue.resume[0].self_assessment=resumeVue.ResumeForm.self_assessment;#}
                                  {#                resumeVue.isShowResume=true;#}
                                  {#                resumeVue.isShowResumeEdit=false;#}
                                  {#                resumeVue.$message({type: 'success',message: "保存成功!"});#}
                                  {##}
                                  {#            }#}
                                  {#            else {#}
                                  {#                var error_list=JSON.parse(data.errs);#}
                                  {#                console.log(error_list)#}
                                  {#                var msg=''#}
                                  {#                for (let key in error_list){#}
                                  {#                    msg=msg+key+error_list[key][0].message+";"#}
                                  {#                }#}
                                  {#                resumeVue.$message.warning(msg);#}
                                  {#            }#}
                                  {#        }#}
                                  {#    })#}

                                  {#data:{'user_name':this.UserForm.user_name,'user_email':this.UserForm.user_email.value,'user_phone':this.UserForm.user_phone};#}
                                  {# else{#}
                                       $.ajax({
                                          url:"/api/resume_edit/"+resumeVue.resume[0].id,
                                          type:"POST",
                                          headers:{"X-CSRFToken":$.cookie('csrftoken')},
                                          {#data: $('#education_experience_form_edit').serialize(),#}//提示错误
                                          {#data:vm.selected,#}
                                          data:{"resume_name":resumeVue.ResumeForm.resume_name,"expected_work_city":resumeVue.ResumeForm.expected_work_city,"desired_position":resumeVue.ResumeForm.desired_position,"expected_salary":resumeVue.ResumeForm.expected_salary,"self_assessment":resumeVue.ResumeForm.self_assessment},
                                          dataType:'JSON',
                                          success:function (data) {
                                              if (data.status === "successful")
                                              {

                                                  {#else{#}
                                                  resumeVue.resume[0].expected_work_city=resumeVue.ResumeForm.expected_work_city;
                                                  resumeVue.resume[0].desired_position=resumeVue.ResumeForm.desired_position;
                                                  resumeVue.resume[0].expected_salary=resumeVue.ResumeForm.expected_salary;
                                                  resumeVue.resume[0].self_assessment=resumeVue.ResumeForm.self_assessment;
                                                  resumeVue.isShowResume=true;
                                                  resumeVue.isShowResumeEdit=false;
                                                  resumeVue.$message({type: 'success',message: "修改成功!"});

                                              }
                                              else {
                                                  var error_list=JSON.parse(data.errs);
                                                  console.log(error_list)
                                                  var msg=''
                                                  for (let key in error_list){
                                                      msg=msg+key+error_list[key][0].message+";"
                                                  }
                                                  resumeVue.$message.warning(msg);
                                              }
                                          }
                                      })

                              } else {
                                console.log('error submit!!');
                                return false;
                              }
                         });

                    },
                    cancelEditOrAddResume(){
                        this.isShowResume=true;
                        this.isShowResumeEdit=false;
                    },

            },
            delimiters: ['[[', ']]']

        })
        var vm=new Vue({
            el: '#education_experience',
            components: {
                'a-component': AComponent,
            },
            data(){
                 return {
                     items: [],
                     isShow: true,
                     education_experiences: [],
                     isShow_Edit: false,
                     id: "",
                     old_school_name: "",
                     {#old_enrollment_time: "",#}
                     {#old_graduation_time: "",#}
                     selectEnrollmentTime: '',
                     selectGraduationTime: '',
                     old_education_background: "", {#value: '',#}
                     old_major: "",
                     old_honor: "",
                     selected: "",
                     pickerOptionsStart: {
                         disabledDate: time => {
                             // disabledDate是一个函数,参数是当前选中的日期值,这个函数需要返回一个Boolean值,
                             if (this.selectGraduationTime) {
                                 return time.getTime() > new Date(this.selectGraduationTime).getTime()
                             }
                         }
                     },
                     pickerOptionsEnd: {
                         disabledDate: time => {
                             if (this.selectEnrollmentTime) {
                                 //getTime1970年1月1日 00:00:00 UTC到当前时间的毫秒数,减8.64e7的作用是,让今天的日期可以选择
                                 return time.getTime() < new Date(this.selectEnrollmentTime).getTime()- 86400000
                             }
                         }
                     },
                      options: [{
                          value: '专科',
                          label: '专科'
                        }, {
                          value: '本科',
                          label: '本科'
                        }, {
                          value: '硕士',
                          label: '硕士'
                        }, {
                          value: '博士',
                          label: '博士'
                        }, {
                          value: '其他',
                          label: '其他'
                        }],
                      loadingEducationExperiencesTable:true,
                 }
            } ,
            created: function () {
                //日期初始化
                 this.initData({});
                 this.getList();

            },
            methods:
                {
                    getList()
                    {
                         $.ajax({
                              url:"/api/resume_show/",
                              type:"post",
                              headers:{"X-CSRFToken":$.cookie('csrftoken')},
                              {#data:$('#education_experience_form').serialize(),#}
                              error: function (xhr, err) {
                                    alert('请求失败，请检查，' + err + '!')
                              },
                              success:function (data) {
                                  var user=JSON.parse(data.user_list);
                                  var hunter=JSON.parse(data.hunter_list);
                                  userVue.user=[];
                                  for(let i = 0; i < user.length; i++) {
                                      userVue.user.push({id:user[i].pk,
                                          user_email:user[i].fields.user_email,
                                          user_phone:user[i].fields.user_phone,
                                          last_login_time:user[i].fields.last_login_time.replace('T',' '),
                                          ip:user[i].fields.ip,
                                          user_name:hunter[i].fields.user_name,
                                          sex:hunter[i].fields.sex,birthday:hunter[i].fields.birthday,city:hunter[i].fields.city,Correspondence_address:hunter[i].fields.Correspondence_address,registered_permanent_residence:hunter[i].fields.registered_permanent_residence,education_background:hunter[i].fields.education_background,qq:hunter[i].fields.qq})
                                  };
                                  {#for(let i = 0; i < hunter.length; i++) {#}
                                  {#    userVue.user.push({sex:hunter[i].fields.sex,birthday:hunter[i].fields.birthday,city:hunter[i].fields.city,Correspondence_address:hunter[i].fields.Correspondence_address,registered_permanent_residence:hunter[i].fields.registered_permanent_residence,education_background:hunter[i].fields.education_background,qq:hunter[i].fields.qq})#}

                                  if(hunter[0].fields.photo=="" ||hunter[0].fields.photo==null ||hunter[0].fields.photo==undefined){}
                                  else{userVue.photo='/media/'+hunter[0].fields.photo;}
                                  userVue.loadingUserTable= false;

                                  vm.education_experiences=[];
                                  if(data.education_experience_list == "" || data.education_experience_list== null || data.education_experience_list == undefined) {
                                  }
                                  else{
                                      var v = JSON.parse(data.education_experience_list);
                                      for(let i = 0; i < v.length; i++) {
                                          vm.education_experiences.push({id:v[i].pk,school_name:v[i].fields.school_name,enrollment_time:v[i].fields.enrollment_time,graduation_time:v[i].fields.graduation_time,education_background:v[i].fields.education_background,major:v[i].fields.major,honor:v[i].fields.honor})
                                      };
                                  }
                                  vm.loadingEducationExperiencesTable=false;


                                  resumeVue.resume=[];
                                  if(data.resume_list == "" || data.resume_list== null || data.resume_list == undefined) {

                                  }
                                  else{
                                       var resume = JSON.parse(data.resume_list);
                                       for(let i = 0; i < resume.length; i++) {
                                          resumeVue.resume.push({id:resume[i].pk,resume_name:resume[i].fields.resume_name,expected_work_city:resume[i].fields.expected_work_city,desired_position:resume[i].fields.desired_position,expected_salary:resume[i].fields.expected_salary,self_assessment:resume[i].fields.self_assessment})
                                      };
                                  }
                                  resumeVue.loadingResumeTable= false;
                                  workVue.work_experiences=[];
                                  if(data.work_experience_list == "" || data.work_experience_list== null || data.work_experience_list == undefined) {
                                  }
                                  else{
                                      var work = JSON.parse(data.work_experience_list);
                                      for(let i = 0; i < work.length; i++) {

                                          workVue.work_experiences.push({id:work[i].pk,company_name:work[i].fields.company_name,entry_time:work[i].fields.entry_time,dismission_time:work[i].fields.dismission_time,position_name:work[i].fields.position_name,position_type:work[i].fields.position_type,department:work[i].fields.department,position_description:work[i].fields.position_description})
                                      };
                                  }
                                  workVue.loadingWorkExperiencesTable=false;

                                    projectVue.project_experiences=[];
                                  if(data.project_experience_list == "" || data.project_experience_list== null || data.project_experience_list == undefined) {
                                  }
                                  else{
                                      var project = JSON.parse(data.project_experience_list);
                                      for(let i = 0; i < project.length; i++) {

                                          projectVue.project_experiences.push({id:project[i].pk,project_name:project[i].fields.project_name,entry_time:project[i].fields.entry_time,end_time:project[i].fields.dismission_time,end_time:work[i].fields.end_time,project_description:project[i].fields.project_description,department:project[i].fields.department,institution:project[i].fields.institution,duty_description:project[i].fields.duty_description,})
                                      };
                                  }
                                  projectVue.loadingProjectExperiencesTable=false;
                                  userVue.fullscreenLoading= false;

                              }
                         })

                    },
                    async initData(data)
                    {
                          //获取当前时间
                          var now   = new Date();
                          var monthn = now.getMonth()+1;
                          var yearn  = now.getFullYear();
                          var dayn = now.getDate();
                          this.selectEnrollmentTime = yearn+"-"+monthn+"-"+dayn;
                          this.selectGraduationTime= yearn+"-"+monthn+"-"+dayn;

                    },

                    add(component) {
                        if (resumeVue.resume==null ||resumeVue.resume==undefined){
                            this.$message.warning('请先填写求职意向');
                        }
                        else {
                            this.isShow = false;
                            this.items.push({'component': component,});
                        }


                  },

                      {#document.write(this.$refs.fruits[1].textContent);#}
                      {#document.write(this.$refs.fruits[1].textContent.split(' ')[0]);#}
                {#      this.education_experience[0].id=this.education_experiences[index].id;#}
                {#      this.education_experience[0].school_name=this.education_experiences[index].school_name;#}
                {#      this.education_experience[0].enrollment_time=this.education_experiences[index].enrollment_time;#}
                {#      this.education_experience[0].graduation_time=this.education_experiences[index].graduation_time;#}
                {#      this.education_experience[0].education_background=this.education_experiences[index].education_background;#}
                {#      this.education_experience[0].major=this.education_experiences[index].major;#}
                {#      this.education_experience[0].honor=this.education_experiences[index].honor;#}
                {#      this.index=index;#}
                {##}
                {#  },#}

                    edit:function(index){
                        this.isShow_Edit=true;
                        this.id=this.education_experiences[index].id;
                        this.old_school_name=this.education_experiences[index].school_name;
                        this.selectEnrollmentTime=this.education_experiences[index].enrollment_time;
                        this.selectGraduationTime=this.education_experiences[index].graduation_time;
                        this.old_education_background=this.education_experiences[index].education_background;
                        this.old_major=this.education_experiences[index].major;
                        this.old_honor=this.education_experiences[index].honor;
                        this.selected=this.education_experiences[index];
                            },


                   //删除子组件
                    remove(){
                        this.isShow=true;
                        this.items.splice(0,1);

                    },
                    cancleEdit(){
                        this.isShow_Edit=false;
                    },
                    //天剑教育背景
                    ad(school_name,enrollment_time,graduation_time,education_background,major,honor)
                    {
                        this.remove();
                         $.ajax
                         ({
                             url: "/api/education_experience_add/",
                             type: "POST",
                             headers: {"X-CSRFToken": $.cookie('csrftoken')},
                             data: {"school_name":school_name,"enrollment_time":enrollment_time,"graduation_time":graduation_time,"education_background":education_background,"major":major,"honor":honor},
                             dataType:'JSON',
                             success: function (data) {
                                 if (data.status === "successful") {
                                     var v = JSON.parse(data.education_experience);
                                     for (let i = 0; i < v.length; i++) {
                                         vm.education_experiences.push({
                                             id: v[i].pk,
                                             school_name: v[i].fields.school_name,
                                             enrollment_time: v[i].fields.enrollment_time,
                                             graduation_time: v[i].fields.graduation_time,
                                             education_background: v[i].fields.education_background,
                                             major: v[i].fields.major,
                                             honor: v[i].fields.honor
                                         })
                                     }
                                    vm.$message({
                                    type: 'success',
                                    message: "保存成功!"
                                    });
                                 }

                                 else {
                                        var error_list=JSON.parse(data.errs);
                                        console.log(error_list)
                                        var msg=''
                                        for (let key in error_list){
                                           msg=msg+key+error_list[key][0].message+";"
                                        }
                                        vm.$message.warning(msg);
                                }
                             }
                         })
                    },
                    deleteEducationExperience:function (index,id)
                    {
                        var r=confirm("您确定要删除?")
                        if (r==true)
                        {
                           $.ajax({
                               url: "/api/education_experience_del/" + id,
                               type: "POST",
                               headers: {"X-CSRFToken": $.cookie('csrftoken')},
                               {#data: $('#education_experience_form').serialize(),#}
                               error: function (xhr, err) {
                                    alert('请求失败，请检查，' + err + '!')
                               },
                               success: function (data) {
                                   if (data.status === 'successful') {
                                        $('#education_experience_{{ education_experience.id }}').empty()
                                       toastr.success("删除成功")
                                       vm.education_experiences.splice(index,1);
                                            //调用方式
                                       {#location.reload(true)#}
                                   } else if (data.status === 'fail') {
                                       toastr.error("删除失败");
                                   }

                               }
                           })
                        }
                        else {return;}
                    },

                    editEducationExperience :function()
                    {
                         this.isShow_Edit=false;
                         $.ajax({
                              url:"/api/education_experience_edit/"+vm.id,
                              type:"POST",
                              headers:{"X-CSRFToken":$.cookie('csrftoken')},
                              {#data: $('#education_experience_form_edit').serialize(),#}//提示错误
                              {#data:vm.selected,#}
                              data:{"school_name":this.old_school_name,"enrollment_time":this.selectEnrollmentTime,"graduation_time":this.selectGraduationTime,"education_background":this.old_education_background,"major":this.old_major,"honor":this.old_honor},
                              dataType:'JSON',
                              success:function (data) {
                                    if (data.status === "successful")
                                    {
                                         vm.selected.school_name=vm.old_school_name
                                        vm.selected.enrollment_time=vm.selectEnrollmentTime
                                        vm.selected.graduation_time=vm.selectGraduationTime
                                        vm.selected.education_background=vm.old_education_background
                                        vm.selected.major=vm.old_major
                                        vm.selected.honor=vm.old_honor
                                        vm.old_school_name="";
                                        vm.selectEnrollmentTime="";
                                        vm.selectGraduationTime="";
                                        vm.old_education_background="";
                                        vm.old_major="";
                                        vm.old_honor="";
                                         vm.$message({type: 'success',message: "保存成功!"});

                                    }
                                    else {
                                        var error_list=JSON.parse(data.errs);
                                        console.log(error_list)
                                        var msg=''
                                        for (let key in error_list){
                                           msg=msg+key+error_list[key][0].message+";"
                                        }
                                        vm.$message.warning(msg);
                                    }
                              }
                        })
                    }
                },
               delimiters: ['[[', ']]']//Django模板与Vue.js 冲突/ 这句可以指定 {[ ]} 为插值表达式的新符号

            })
        var workVue=new Vue({
            el: '#work_experience',
            components: {
                'b-component': BComponent,
            },
            data(){
                 return {
                     items: [],
                     isShow: true,
                     work_experiences: [],
                     isShow_Edit: false,
                     id: "",
                     old_company_name: "",
                     {#old_enrollment_time: "",#}
                     {#old_graduation_time: "",#}
                     old_entry_time: '',
                     old_dismission_time: '',
                     old_position_name: "", {#value: '',#}
                     old_department: "",
                     old_position_type: "",
                     old_position_description:"",
                     selected: "",
                     pickerOptionsStart: {
                         disabledDate: time => {
                             // disabledDate是一个函数,参数是当前选中的日期值,这个函数需要返回一个Boolean值,
                             if (this.old_dismission_time) {
                                 return time.getTime() > new Date(this.old_dismission_time).getTime()
                             }
                         }
                     },
                     pickerOptionsEnd: {
                         disabledDate: time => {
                             if (this.old_entry_time) {
                                 //getTime1970年1月1日 00:00:00 UTC到当前时间的毫秒数,减8.64e7的作用是,让今天的日期可以选择
                                 return time.getTime() < new Date(this.old_entry_time).getTime()- 86400000
                             }
                         }
                     },

                      loadingWorkExperiencesTable:true,
                 }
            } ,
            created: function () {
                //日期初始化
                 this.initData({});


            },
            methods:
                {

                    async initData(data)
                    {
                          //获取当前时间
                          var now   = new Date();
                          var monthn = now.getMonth()+1;
                          var yearn  = now.getFullYear();
                          var dayn = now.getDate();
                          this.selectEnrollmentTime = yearn+"-"+monthn+"-"+dayn;
                          this.selectGraduationTime= yearn+"-"+monthn+"-"+dayn;

                    },
                    //先填写求职意向，才能填写教育背景
                    add(component) {
                        if (resumeVue.resume=='' || resumeVue.resume==null ||resumeVue.resume==undefined){
                            this.$message.warning('请先填写求职意向');
                        }
                        else {
                            this.isShow = false;
                            this.items.push({'component': component,});
                        }


                  },

                    edit:function(index){
                        this.isShow_Edit=true;
                        this.id=this.work_experiences[index].id;
                        this.old_company_name=this.work_experiences[index].company_name;
                        this.old_entry_time=this.work_experiences[index].entry_time;
                        this.old_dismission_time=this.work_experiences[index].dismission_time;
                        this.old_position_name=this.work_experiences[index].position_name;
                        this.old_department=this.work_experiences[index].department;
                        this.old_position_type=this.work_experiences[index].position_type;
                        this.old_position_description=this.work_experiences[index].position_description;
                        this.selected=this.work_experiences[index];
                            },


                   //删除子组件
                    remove(){
                        this.isShow=true;
                        this.items.splice(0,1);

                    },
                    cancleEdit(){
                        this.isShow_Edit=false;
                    },
                    //天剑工作
                    ad(company_name,entry_time,dismission_time,position_name,department,position_type,position_description)
                    {
                        this.remove();
                         $.ajax
                         ({
                             url: "/api/work_experience_add/",
                             type: "POST",
                             headers: {"X-CSRFToken": $.cookie('csrftoken')},
                             data: {"company_name":company_name,"entry_time":entry_time,"dismission_time":dismission_time,"position_name":position_name,"department":department,"position_type":position_type,"position_description":position_description},
                             dataType:'JSON',
                             success: function (data) {
                                 if (data.status === "successful") {
                                     var work= JSON.parse(data.work_experience);
                                     for (let i = 0; i < work.length; i++) {
                                         workVue.work_experiences.push({
                                             id: work[i].pk,
                                             company_name: work[i].fields.company_name,
                                             entry_time: work[i].fields.entry_time,
                                             dismission_time: work[i].fields.dismission_time,
                                             position_name: work[i].fields.position_name,
                                             department: work[i].fields.department,
                                             position_type: work[i].fields.position_type,
                                             position_description: work[i].fields.position_description,
                                         })
                                     }
                                    workVue.$message({
                                    type: 'success',
                                    message: "保存成功!"
                                    });
                                 }

                                 else {
                                        var error_list=JSON.parse(data.errs);
                                        console.log(error_list)
                                        var msg=''
                                        for (let key in error_list){
                                           msg=msg+key+error_list[key][0].message+";"
                                        }
                                        workVue.$message.warning(msg);
                                }
                             }
                         })
                    },
                    deleteWorkExperience:function (index,id)
                    {
                        var r=confirm("您确定要删除?")
                        if (r==true)
                        {
                           $.ajax({
                               url: "/api/work_experience_del/" + id,
                               type: "POST",
                               headers: {"X-CSRFToken": $.cookie('csrftoken')},
                               {#data: $('#education_experience_form').serialize(),#}
                               error: function (xhr, err) {
                                    alert('请求失败，请检查，' + err + '!')
                               },
                               success: function (data) {
                                   if (data.status === 'successful') {
                                        $('#work_experience_{{ work_experience.id }}').empty()
                                       toastr.success("删除成功")
                                       workVue.work_experiences.splice(index,1);
                                            //调用方式
                                       {#location.reload(true)#}
                                   } else if (data.status === 'fail') {
                                       toastr.error("删除失败");
                                   }

                               }
                           })
                        }
                        else {return;}
                    },

                    editWorkExperience :function()
                    {
                         this.isShow_Edit=false;
                         $.ajax({
                              url:"/api/work_experience_edit/"+workVue.id,
                              type:"POST",
                              headers:{"X-CSRFToken":$.cookie('csrftoken')},
                              {#data: $('#education_experience_form_edit').serialize(),#}//提示错误
                              {#data:vm.selected,#}

                              data:{"company_name":this.old_company_name,"entry_time":this.old_entry_time,"dismission_time":this.old_dismission_time,"position_name":this.old_position_name,"department":this.old_department,"position_type":this.old_position_type,"position_description":this.old_position_description},
                              dataType:'JSON',
                              success:function (data) {
                                    if (data.status === "successful")
                                    {
                                         workVue.selected.company_name=workVue.old_company_name
                                        workVue.selected.entry_time=workVue.old_entry_time
                                        workVue.selected.dismission_time=workVue.old_dismission_time
                                        workVue.selected.position_name=workVue.old_position_name
                                        workVue.selected.department=workVue.old_department
                                        workVue.selected.position_type=workVue.old_position_type
                                        workVue.selected.position_description=workVue.old_position_description
                                        workVue.old_company_name="";
                                        workVue.old_entry_time="";
                                        workVue.old_dismission_time="";
                                        workVue.old_position_name="";
                                        workVue.old_department="";
                                        workVue.old_position_type="";
                                        workVue.old_position_description="";
                                         workVue.$message({type: 'success',message: "保存成功!"});

                                    }
                                    else {
                                        var error_list=JSON.parse(data.errs);
                                        console.log(error_list)
                                        var msg=''
                                        for (let key in error_list){
                                           msg=msg+key+error_list[key][0].message+";"
                                        }
                                        workVue.$message.warning(msg);
                                    }
                              }
                        })
                    }
                },
               delimiters: ['[[', ']]']//Django模板与Vue.js 冲突/ 这句可以指定 {[ ]} 为插值表达式的新符号

            })

        var projectVue=new Vue({
            el: '#project_experience',
            components: {
                'c-component': CComponent,
            },
            data(){
                 return {
                     items: [],
                     isShow: true,
                     project_experiences: [],
                     isShow_Edit: false,
                     id: "",
                     old_project_name: "",
                     {#old_enrollment_time: "",#}
                     {#old_graduation_time: "",#}
                     old_start_time: '',
                     old_end_time: '',
                     old_project_description: "", {#value: '',#}
                     old_institution: "",
                     old_duty_description:"",
                     selected: "",
                     pickerOptionsStart: {
                         disabledDate: time => {
                             // disabledDate是一个函数,参数是当前选中的日期值,这个函数需要返回一个Boolean值,
                             if (this.old_end_time) {
                                 return time.getTime() > new Date(this.old_end_time).getTime()
                             }
                         }
                     },
                     pickerOptionsEnd: {
                         disabledDate: time => {
                             if (this.old_start_time) {
                                 //getTime1970年1月1日 00:00:00 UTC到当前时间的毫秒数,减8.64e7的作用是,让今天的日期可以选择
                                 return time.getTime() < new Date(this.old_start_time).getTime()- 86400000
                             }
                         }
                     },

                      loadingProjectExperiencesTable:true,
                 }
            } ,
            created: function () {
                //日期初始化
                 this.initData({});


            },
            methods:
                {

                    async initData(data)
                    {
                          //获取当前时间
                          var now   = new Date();
                          var monthn = now.getMonth()+1;
                          var yearn  = now.getFullYear();
                          var dayn = now.getDate();
                          this.old_start_time = yearn+"-"+monthn+"-"+dayn;
                          this.old_end_time= yearn+"-"+monthn+"-"+dayn;

                    },

                    add(component) {
                        if (resumeVue.resume==null ||resumeVue.resume==undefined){
                            this.$message.warning('请先填写求职意向');
                        }
                        else {
                            this.isShow = false;
                            this.items.push({'component': component,});
                        }


                  },

                    edit:function(index){
                        this.isShow_Edit=true;
                        this.id=this.work_experiences[index].id;
                        this.old_project_name=this.work_experiences[index].project_name;
                        this.old_start_time=this.work_experiences[index].start_time;
                        this.old_end_time=this.work_experiences[index].end_time;
                        this.old_project_description=this.work_experiences[index].project_description;
                        this.old_department=this.work_experiences[index].department;
                        this.old_institution=this.work_experiences[index].institution;
                        this.old_duty_description=this.work_experiences[index].duty_description;
                        this.selected=this.project_experiences[index];
                            },


                   //删除子组件
                    remove(){
                        this.isShow=true;
                        this.items.splice(0,1);

                    },
                    cancleEdit(){
                        this.isShow_Edit=false;
                    },
                    //天剑教育背景
                    ad(project_name,start_time,end_time,project_description,institution,duty_description)
                    {
                        this.remove();
                         $.ajax
                         ({
                             url: "/api/project_experience_add/",
                             type: "POST",
                             headers: {"X-CSRFToken": $.cookie('csrftoken')},
                             data: {"project_name":project_name,"start_time":start_time,"end_time":end_time,"project_description":project_description,"institution":institution,"duty_description":duty_description},
                             dataType:'JSON',
                             success: function (data) {
                                 if (data.status === "successful") {
                                     var project= JSON.parse(data.project_experience);
                                     for (let i = 0; i < project.length; i++) {
                                         projectVue.project_experiences.push({
                                             id: project[i].pk,
                                             project_name: project[i].fields.project_name,
                                             start_time: project[i].fields.start_time,
                                             end_time: project[i].fields.end_time,
                                             project_description: project[i].fields.project_description,
                                             institution: project[i].fields.institution,
                                             duty_description: project[i].fields.duty_description,
                                         })
                                     }
                                    projectVue.$message({
                                    type: 'success',
                                    message: "保存成功!"
                                    });
                                 }

                                 else {
                                        var error_list=JSON.parse(data.errs);
                                        console.log(error_list)
                                        var msg=''
                                        for (let key in error_list){
                                           msg=msg+key+error_list[key][0].message+";"
                                        }
                                        projectVue.$message.warning(msg);
                                }
                             }
                         })
                    },
                    deleteProjectExperience:function (index,id)
                    {
                        var r=confirm("您确定要删除?")
                        if (r==true)
                        {
                           $.ajax({
                               url: "/api/project_experience_del/" + id,
                               type: "POST",
                               headers: {"X-CSRFToken": $.cookie('csrftoken')},
                               {#data: $('#education_experience_form').serialize(),#}
                               error: function (xhr, err) {
                                    alert('请求失败，请检查，' + err + '!')
                               },
                               success: function (data) {
                                   if (data.status === 'successful') {
                                        $('#project_experience_{{ project_experience.id }}').empty()
                                       toastr.success("删除成功")
                                       projectVue.project_experiences.splice(index,1);
                                            //调用方式
                                       {#location.reload(true)#}
                                   } else if (data.status === 'fail') {
                                       toastr.error("删除失败");
                                   }

                               }
                           })
                        }
                        else {return;}
                    },

                    editProjectExperience :function()
                    {
                         this.isShow_Edit=false;
                         $.ajax({
                              url:"/api/project_experience_edit/"+projectVue.id,
                              type:"POST",
                              headers:{"X-CSRFToken":$.cookie('csrftoken')},
                              {#data: $('#education_experience_form_edit').serialize(),#}//提示错误
                              {#data:vm.selected,#}
                              data:{"project_name":this.old_project_name,"start_time":this.old_start_time,"end_time":this.old_end_time,"project_description":this.old_project_description,"institution":this.old_institution,"duty_description":this.old_duty_description},
                              dataType:'JSON',
                              success:function (data) {
                                    if (data.status === "successful")
                                    {
                                         projectVue.selected.project_name=projectVue.old_project_name
                                        projectVue.selected.start_time=projectVue.old_start_time;
                                        projectVue.selected.end_time=projectVue.old_end_time;
                                        projectVue.selected.project_description=projectVue.old_project_description;
                                        projectVue.selected.institution=projectVue.old_institution;
                                        projectVue.selected.duty_description=projectVue.old_duty_description;
                                        projectVue.old_project_name="";
                                        projectVue.old_start_time="";
                                        projectVue.old_end_time="";
                                        projectVue.old_project_description="";
                                        projectVue.old_institution="";
                                        projectVue.old_duty_description="";
                                         projectVue.$message({type: 'success',message: "保存成功!"});

                                    }
                                    else {
                                        var error_list=JSON.parse(data.errs);
                                        console.log(error_list)
                                        var msg=''
                                        for (let key in error_list){
                                           msg=msg+key+error_list[key][0].message+";"
                                        }
                                        projectVue.$message.warning(msg);
                                    }
                              }
                        })
                    }
                },
               delimiters: ['[[', ']]']//Django模板与Vue.js 冲突/ 这句可以指定 {[ ]} 为插值表达式的新符号

            })



     </script>

</body>
</html>