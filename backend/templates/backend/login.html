
{#<html lang="en">#}
{#<head>#}
{#    <meta charset="UTF-8">#}
{#    <title>登录</title>#}
{#</head>#}
{#<body>#}
{#<div class="container">#}
{#            <div class="col">#}
{#                <form class="form-login" action="/api/login/" method="post">#}
{#                {% if login_form.captcha.errors %}#}
{#                    <div class="alert alert-warning">{{ login_form.captcha.errors }}</div>#}
{#                {% elif message %}#}
{#                    <div class="alert alert-warning">{{ message }}</div>#}
{#                {% endif %}#}
{##}
{#                  {% csrf_token %}#}
{#                  <h3 class="text-center">密码登录</h3>#}
{##}
{#                  <div class="form-group">#}
{#                    {{ login_form.user_phone.label_tag }}#}
{#                    {{ login_form.user_phone}}#}
{#                      {{ error.user_phone.0 }}#}
{#                  </div>#}
{##}
{#                  <div class="form-group">#}
{#                    {{ login_form.user_password.label_tag }}#}
{#                    {{ login_form.user_password }}#}
{#                      {{ error.user_password.0 }}#}
{#                  </div>#}
{##}
{##}
{#                  <div class="form-group">#}
{#                    {{ login_form.captcha.label_tag }}#}
{#                    {{ login_form.captcha }}#}
{#                  </div>#}
{##}
{#                  <div>#}
{#                      <a href={% url 'update_pwd' %}>忘记密码？</a>#}
{#                      <a href={% url 'register' %} ><ins>还没有账号？新用户注册</ins></a>#}
{#                      <button type="submit" >登录</button>#}
{#                  </div>#}
{#                </form>#}
{#            </div>#}
{#    </div> <!-- /container -->#}
{##}
{##}
{#</body>#}
{#</html>#}
<html lang="en"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="/static/favicon.ico" type="image/x-icon" />
    <script src="/static/jquery-3.4.1.min.js"></script>
    <script src="http://apps.bdimg.com/libs/jquery.cookie/1.4.1/jquery.cookie.js"></script>
    <link href="//cdn.bootcss.com/toastr.js/latest/css/toastr.min.css" rel="stylesheet">
    <script src="//cdn.bootcss.com/toastr.js/latest/js/toastr.min.js"></script>
    <script src="https://cdn.staticfile.org/vue/2.2.2/vue.min.js"></script>
    <script src="https://cdn.staticfile.org/vue-resource/1.5.1/vue-resource.min.js"></script>
 <!-- 导入 CSS 样式 -->
    <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
    <!-- 导入Vue -->
    <script src="https://unpkg.com/vue/dist/vue.js"></script>

<!-- 引入组件库 -->
<script src="https://unpkg.com/element-ui/lib/index.js"></script>

    <title>欢迎登陆|人才招聘</title>
<style>
    <!-- css代码 -->
.pannel {
  position: absolute;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  z-index: 1502;
  background-color: rgba(0, 0, 0, 0.7);
}
.pannel-inner {
  position: absolute;
  background-color: white;
  left: 40%;
  top: 30%;
  width: 20%;
  /* border: solid #409eff 1px; */
  padding: 0 17px 17px 17px;
  font-size: 18px;
}
.pannel-header {
  margin-bottom: 7px;
  text-align: center;
}

</style>
</head>


<body  >

{#   <div id="login" v-show="isLogin" class="contain">#}
{#    <el-row class="child">#}
{#      <el-col :xs="24" :sm="11" :md="8" :lg="9" :xl="8">#}
{#        <h3 style="text-align: center;">登录界面</h3>#}
{#        <el-form :model="loginForm"  :rules="rules" ref="loginForm" label-width="100px" id="demo-loginForm" class="demo-loginForm">#}
{#           <el-form-item label="账号(邮箱)：" prop="user_email">#}
{#            <el-input  v-model="loginForm.user_email" autocomplete="off" clearable>#}
{#            </el-input>#}
{#          </el-form-item>#}
{#          <el-form-item label="密码：" prop="password">#}
{#            <el-input type="password" v-model="loginForm.password" autocomplete="off" show-password clearable></el-input>#}
{#          </el-form-item>#}
{#          <el-form-item>#}
{#            <el-button type="primary" @click="submitForm('loginForm')">提交</el-button>#}
{#            <el-button @click="resetForm('loginForm')">重置</el-button>#}
{#          </el-form-item>#}
{#              <el-form-item>#}
{#              <a href={% url 'update_pwd' %}>忘记密码？</a>#}
{#              </el-form-item>#}
{#            <el-form-item>#}
{#                  <el-button @click="toRegister()">还没有账号？新用户注册</el-button>#}
{#                <a href={% url 'register' %} ><ins>还没有账号？新用户注册</ins></a>#}
{##}
{#          </el-form-item>#}
{#        </el-form>#}
{#      </el-col>#}
{#    </el-row>#}
{#  </div>#}


      <div  z-index ='1' id="module409" bannertitle="图片" _indexclass="" _moduletype="1" _modulestyle="79" _moduleid="409" class="form form409 formStyle79" title="" _sys="0" _banid="" style="position: absolute; top: 69px; left: 529px; width: 770px; animation: 0s ease 0s 1 normal none running none;" _side="0" _intab="0" _inmulmcol="0" _infullmeasure="0" _inpack="0" _inpopupzone="0" _infullmeasurepack="398" _intabpack="0" _autoheight="0" _global="false" _independent="false" data-scrollbar="0">
<div class="lightModuleOuterContent lightModuleOuterContent409"><div class="floatImg floatImg_J floatImg_J_special"><a hidefocus="true" class="J_floatImg_jump f_floatImg_jump ">
<div class="floatImgWrap"><div class="forMargin"><img id="float_img_409" class="lazyload_transparent float_in_img J_defImage" data-original="//21097352.s61i.faiusr.com/2/AD0IiNeHChACGAAg0tzC7wUo6YuBdTDmBjjGBA.jpg" src="/static/image/AD0IiNeHChACGAAg0tzC7wUo6YuBdTDmBjjGBA.jpg" alt="AD0IiNeHChACGAAg0tzC7wUo6YuBdTDmBjjGBA" data-imgloaded="true"></div></div></a>
</div></div>
</div>






<div id="login">
    <div id="module410" v-show="isLogin" bannertitle="图片" _indexclass="" _moduletype="1" _modulestyle="79" _moduleid="410" class="form form410 formStyle79" title="" _sys="0" _banid="" style="position: absolute; top: 106px; left: 99px; width: 485px; animation: 0s ease 0s 1 normal none running none;" _side="0" _intab="0" _inmulmcol="0" _infullmeasure="0" _inpack="0" _inpopupzone="0" _infullmeasurepack="398" _intabpack="0" _autoheight="0" _global="false" _independent="false" data-scrollbar="0">
    <div class="lightModuleOuterContent lightModuleOuterContent410"><div class="floatImg floatImg_J floatImg_J_special"><a hidefocus="true" class="J_floatImg_jump f_floatImg_jump ">
    <div class="floatImgWrap"><div class="forMargin"><img id="float_img_410" style="height: 500px;width: 500px;" class="lazyload_transparent float_in_img J_defImage" data-original="//21097352.s61i.faiusr.com/4/AD0IiNeHChAEGAAgp9fC7wUosOe52QMw5QM41QM.png" src="/static/image/AD0IiNeHChAEGAAgp9fC7wUosOe52QMw5QM41QM.png" alt="AD0IiNeHChAEGAAgp9fC7wUosOe52QMw5QM41QM" data-imgloaded="true"></div></div></a>
    </div></div>
    </div>

    <div id="module411" bannertitle="文本" _indexclass="" _moduletype="1" _modulestyle="86" _moduleid="411" class="form form411 formStyle86 siteEditor" title="" _sys="0" _banid="" style="position: absolute; top: 260px; left: 105px; width: 900px; height: 91px; animation: 0s ease 0s 1 normal none running none;" _side="0" _intab="0" _inmulmcol="0" _infullmeasure="0" _inpack="0" _inpopupzone="0" _infullmeasurepack="398" _intabpack="0" _autoheight="0" _global="false" _independent="false" data-scrollbar="0">
    {#<div class="lightModuleOuterContent lightModuleOuterContent411">#}
    {#    <div class="fk-editor simpleText fk-editor-break-word  ">#}
            <div style="font-size: 14px; line-height: 30px; color: rgb(140, 140, 140);">
      <div v-if="isLogin" class="contain">
        <el-row class="child">
          <el-col :xs="24" :sm="11" :md="8" :lg="9" :xl="8">
            <el-form :model="loginForm"  :rules="rules" ref="loginForm" label-width="100px" id="demo-loginForm" class="demo-loginForm">
                {% csrf_token %}
                <el-form-item label="邮箱：" prop="user_email">
                <el-input  v-model="loginForm.user_email" autocomplete="off" clearable>
                </el-input>
              </el-form-item>
              <el-form-item label="密码：" prop="password">
                <el-input type="password" v-model="loginForm.password" autocomplete="off" show-password clearable></el-input>
              </el-form-item>
              <el-form-item>
                <el-button type="primary" @click="submitForm('loginForm')">登录</el-button>
                <el-button @click="resetForm('loginForm')">重置</el-button>
              </el-form-item>
                  <el-form-item>
                  <a href={% url 'update_pwd' %}>忘记密码？</a>
                  </el-form-item>
                <el-form-item>
                      <el-button @click="toRegister()">还没有账号？新用户注册</el-button>
    {#                <a href={% url 'register' %} ><ins>还没有账号？新用户注册</ins></a>#}

              </el-form-item>
            </el-form>
          </el-col>
        </el-row>
      </div>

       </div>
    </div>
    <div id="module412" v-show="isLogin" bannertitle="文本" _indexclass="" _moduletype="1" _modulestyle="86" _moduleid="412" class="form form412 formStyle86 siteEditor" title="" _sys="0" _banid="" style="position: absolute; top: 162px; left: 185px; width: 396px; height: 90px; animation: 0s ease 0s 1 normal none running none;" _side="0" _intab="0" _inmulmcol="0" _infullmeasure="0" _inpack="0" _inpopupzone="0" _infullmeasurepack="398" _intabpack="0" _autoheight="0" _global="false" _independent="false" data-scrollbar="0">
<div  style="text-align: center;margin:0 auto;" class="lightModuleOuterContent lightModuleOuterContent412"><div class="fk-editor simpleText fk-editor-break-word  "><span style="line-height: 40px;"><font color="#333333" face="微软雅黑, Microsoft YaHei"><span style="font-size: 28px;"><b  >LOGIN|SING IN</b></span></font><div><font color="#333333" face="微软雅黑, microsoft yahei"><span style="font-size: 24px;"><img src="/static/image/logo.jpg" style="width: 30px;height: 30px;"></span></font><font face="fontface__alibabasans-medium__119__1227887646108"><span style="font-size: 32px;"><br></span></font></div></span></div></div>
</div>

</div>
<div id="register">
    <div id="module411"  v-show="isSign" bannertitle="图片" _indexclass="" _moduletype="1" _modulestyle="79" _moduleid="410" class="form form410 formStyle79" title="" _sys="0" _banid="" style="position: absolute; top: 106px; left: 201px; width: 485px; animation: 0s ease 0s 1 normal none running none;" _side="0" _intab="0" _inmulmcol="0" _infullmeasure="0" _inpack="0" _inpopupzone="0" _infullmeasurepack="398" _intabpack="0" _autoheight="0" _global="false" _independent="false" data-scrollbar="0">
<div class="lightModuleOuterContent lightModuleOuterContent410"><div class="floatImg floatImg_J floatImg_J_special"><a hidefocus="true" class="J_floatImg_jump f_floatImg_jump ">
<div class="floatImgWrap"><div class="forMargin"><img id="float_img_410" style="height: 700px;width: 500px;" class="lazyload_transparent float_in_img J_defImage" data-original="//21097352.s61i.faiusr.com/4/AD0IiNeHChAEGAAgp9fC7wUosOe52QMw5QM41QM.png" src="/static/image/AD0IiNeHChAEGAAgp9fC7wUosOe52QMw5QM41QM.png" alt="AD0IiNeHChAEGAAgp9fC7wUosOe52QMw5QM41QM" data-imgloaded="true"></div></div></a>
</div></div>
</div>

    <div id="module411" bannertitle="文本" _indexclass="" _moduletype="1" _modulestyle="86" _moduleid="411" class="form form411 formStyle86 siteEditor" title="" _sys="0" _banid="" style="position: absolute; top: 260px; left: 255px; width: 800px; height: 91px; animation: 0s ease 0s 1 normal none running none;" _side="0" _intab="0" _inmulmcol="0" _infullmeasure="0" _inpack="0" _inpopupzone="0" _infullmeasurepack="398" _intabpack="0" _autoheight="0" _global="false" _independent="false" data-scrollbar="0">
{#<div class="lightModuleOuterContent lightModuleOuterContent411">#}
{#    <div class="fk-editor simpleText fk-editor-break-word  ">#}
        <div style="font-size: 14px; line-height: 30px; color: rgb(140, 140, 140);">

   <div  v-show="isSign" class="contain">
    <el-row class="child">
      <el-col :xs="24" :sm="11" :md="8" :lg="9" :xl="8">

        <el-form :model="registerForm"  :rules="rules" ref="registerForm" label-width="100px" id="demo-registerForm" class="demo-registerForm">

          </el-form-item>
          <el-form-item label="密码" prop="password">
            <el-input type="password" v-model="registerForm.password" autocomplete="off" show-password clearable></el-input>
          </el-form-item>
            <el-form-item label="确认密码" prop="repassword">
            <el-input type="password" v-model="registerForm.repassword" autocomplete="off" show-password clearable></el-input>
          </el-form-item>
            <el-form-item label="手机号" prop="user_phone">
            <el-input type="text" v-model="registerForm.user_phone" autocomplete="off"  clearable></el-input>
          </el-form-item>
            <el-form-item label="邮箱" prop="user_email">
            <el-input type="text" v-model="registerForm.user_email" autocomplete="off" clearable></el-input>
          </el-form-item>

           <el-form-item label="邮箱验证码" prop="code">
                <el-input  v-model="registerForm.code" autocomplete="off" clearable></el-input>
            <el-button v-show="show" @click="sendEmail" class="send_email">获取验证码</el-button>
               <el-button v-show="!show" class="count">([[count]]s)后重新发送 </el-button>
                </el-form-item>
            <el-form-item label="类型" prop="user_type">
                        <el-select v-model="registerForm.user_type" placeholder="请选择类型">
                            <el-option label="求职者" value="1"></el-option>
                            <el-option label="企业" value="2"></el-option>

                      </el-select>
          </el-form-item >
          <el-form-item>
            <el-button type="primary" @click="Register('registerForm')">注册</el-button>
            <el-button @click="resetRegisterForm('registerForm')">重置</el-button>
          </el-form-item>
              <el-form-item>
{#              <a href="/api/login"  ><ins>已注册？接登录</ins></a>#}
                  <el-button @click="toLogin()">已注册？直接登录</el-button>
              </el-form-item>

        </el-form>
      </el-col>
    </el-row>
  </div>

{#	<section class="h-100">#}
{#		<div z-index ='2' class="container h-100">#}
{#			<div class="row justify-content-md-center h-100">#}
{#				<div class="card-wrapper">#}
{##}
{#					<div class="card fat">#}
{#						<div class="card-body">#}
{##}
{#							<form method="POST">#}
{##}
{#								<div class="form-group">#}
{#									<label for="email">E-Mail Address</label>#}
{##}
{#									<input id="email" type="email" class="form-control" name="email" value="" required="" autofocus="">#}
{#								</div>#}
{##}
{#								<div class="form-group">#}
{#									<label for="password">Password#}
{#										<a href="forgot.html" class="float-right">#}
{#											Forgot Password?#}
{#										</a>#}
{#									</label>#}
{#									<div style="position:relative"><input id="password" type="password" class="form-control" name="password" required="" data-eye="" style="padding-right: 60px;"><input type="hidden" id="passeye-0"><div class="btn btn-primary btn-sm" id="passeye-toggle-0" style="position:absolute;right:10px;top:50%;transform:translate(0,-50%);padding: 2px 7px;font-size:12px;cursor:pointer;">Show</div></div>#}
{#								</div>#}
{##}
{#								<div class="form-group">#}
{#									<label>#}
{#										<input type="checkbox" name="remember"> Remember Me#}
{#									</label>#}
{#								</div>#}
{##}
{#								<div class="form-group no-margin">#}
{#									<button type="submit" class="btn btn-primary btn-block">#}
{#										Login#}
{#									</button>#}
{#								</div>#}
{#								<div class="margin-top20 text-center">#}
{#									Don't have an account? <a href="register.html">Create One</a>#}
{#								</div>#}
{#							</form>#}
{#						</div>#}
{#					</div>#}
{#					<div class="footer">#}
{#						Copyright © Your Company 2017 - More Templates <a href="http://www.cssmoban.com/" target="_blank" title="模板之家">模板之家</a> - Collect from <a href="http://www.cssmoban.com/" title="网页模板" target="_blank">网页模板</a>#}
{#					</div>#}
{#				</div>#}
{#			</div>#}
{#		</div>#}
{#	</section>#}
{#</div>#}
{#</div>#}
   </div>
</div>
<div id="module412" v-show="isSign" bannertitle="文本" _indexclass="" _moduletype="1" _modulestyle="86" _moduleid="412" class="form form412 formStyle86 siteEditor" title="" _sys="0" _banid="" style="position: absolute; top: 162px; left: 255px; width: 396px; height: 90px; animation: 0s ease 0s 1 normal none running none;" _side="0" _intab="0" _inmulmcol="0" _infullmeasure="0" _inpack="0" _inpopupzone="0" _infullmeasurepack="398" _intabpack="0" _autoheight="0" _global="false" _independent="false" data-scrollbar="0">
<div  style="text-align: center;margin:0 auto;" class="lightModuleOuterContent lightModuleOuterContent412"><div class="fk-editor simpleText fk-editor-break-word  "><span style="line-height: 40px;"><font color="#333333" face="微软雅黑, Microsoft YaHei"><span style="font-size: 28px;"><b  >LOGIN|SING IN</b></span></font><div><font color="#333333" face="微软雅黑, microsoft yahei"><span style="font-size: 24px;"><img src="/static/image/logo.jpg" style="width: 30px;height: 30px;"></span></font><font face="fontface__alibabasans-medium__119__1227887646108"><span style="font-size: 32px;"><br></span></font></div></span></div></div>
</div>

  </div>



<script>

    var loginVue=new Vue(
    {
        el:'#login',
        data()
        {
              var checkEmail = (rule, value, callback) => {
                const mailReg = /^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/
                if (!value) {
                  return callback(new Error('邮箱不能为空'))
                }
                setTimeout(() => {
                  if (mailReg.test(value)) {
                    callback()
                  } else {
                    callback(new Error('请输入正确的邮箱格式'))
                  }
                }, 100)
              }
              var validatePassword = (rule, value, callback) => {
                if (value === '') {
                  callback(new Error('请输入密码'));
                } else {
                  callback();
                }
              }
              return{
                 loginForm:
                 {
                      user_email: '',
                      password: '',
                 },
                rules:
                {
                  user_email: [{ validator: checkEmail,          trigger: 'blur'      }],
                  password: [{ min: 6, max: 20, message: '请输入6-20位字符', trigger: 'blur' },
                      {   validator: validatePassword,   trigger: 'blur'      }]
                },
                isLogin:true,

            }
        },
    methods: {
      submitForm(formName) {
        this.$refs[formName].validate((valid) => {
          if (valid) {
           $.ajax({
              url:"/api/login/",
              type:"POST",
              headers:{"X-CSRFToken":$.cookie('csrftoken')},
              {#data: $('#demo-loginForm').serialize(),//提示错误#}
              {#data:vm.selected,#}
              data:{user_email:loginVue.loginForm.user_email,user_password:loginVue.loginForm.password},
              dataType:'JSON',
              success:function (data) {
                  if (data.status === "successful")
                  {

                      if(data.user_type=='2'){
                          window.location.href='http://localhost:8000/api/company_index/';
                      }
                      else if(data.user_type=='1'){
                          window.location.href='http://localhost:8000/api/index/';
                      }
                      else if(data.user_type=='3'){
                          window.location.href='http://localhost:8000/api/admin_index/';
                      }
                  }
                  else if(data.status === "warning"){
                        loginVue.$message.warning(data.errs);
                  }
                  else {
                      var error_list=JSON.parse(data.errs);
                      console.log(error_list)
                      var msg=''
                      for (let key in error_list){
                          msg=msg+key+error_list[key][0].message+";"
                      }
                      loginVue.$message.warning(msg);
                  }
              }
           })
          }
          else {
            this.$message.error('登录失败');
            return false;
          }
        });
      },
      resetForm(formName) {
        this.$refs[formName].resetFields();
        },
        toRegister(){
          this.isLogin=false;
          registerVue.isSign=true;
        }
        },
     })
var registerVue=new Vue(
    {
        el:'#register',
        data()
        {


                var validatePass2 = (rule, value, callback) => {
                    if (value === '') {
                        callback(new Error('请再次输入密码'));
                    } else if (value !== this.registerForm.password) {
                        callback(new Error('两次输入密码不一致!'));
                    } else {
                        callback();
                    }
                };
               var checkPhone = (rule, value, callback) => {
                    const phoneReg = /^1[3|4|5|7|8][0-9]{9}$/
                    if (!value) {
                      return callback(new Error('电话号码不能为空'))
                    }
                    setTimeout(() => {
                      // Number.isInteger是es6验证数字是否为整数的方法,但是我实际用的时候输入的数字总是识别成字符串
                      // 所以我就在前面加了一个+实现隐式转换

                      if (!Number.isInteger(+value)) {
                        callback(new Error('请输入数字值'))
                      } else {
                        if (phoneReg.test(value)) {
                          callback()
                        } else {
                          callback(new Error('电话号码格式不正确'))
                        }
                      }
                    }, 100)
                  }
            var checkEmail = (rule, value, callback) => {
                const mailReg = /^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/
                if (!value) {
                  return callback(new Error('邮箱不能为空'))
                }
                setTimeout(() => {
                  if (mailReg.test(value)) {
                    callback()
                  } else {
                    callback(new Error('请输入正确的邮箱格式'))
                  }
                }, 100)
              }
              return{
                 registerForm:
                 {

                      password: '',
                      repassword:'',
                      user_email:'',
                        user_phone:'',
                     user_type:'',
                     code:'',

                 },
                rules:
                {

                  password: [
                                { required: true, message: '请输入密码', trigger: 'blur' },
                                { min: 6, max: 20, message: '请输入6-20位字符', trigger: 'blur' },

                            ],
                repassword: [
                                { required: true, message: '请再次输入密码', trigger: 'blur' },
                                { validator: validatePass2, trigger: 'blur'}
                            ],
                    user_email: [ { validator: checkEmail, trigger: 'blur' }                  ],
                    user_phone: [ { required: true, message: '请填写手机号', trigger: 'blur'},
                        { validator: checkPhone, trigger: 'blur' }      ],
                    user_type: [ { required: true, message: '请选择学历', trigger: 'change' } ],
                    code: [ { required: true, message: '请进行邮箱验证', trigger: 'blur' } ],
                },
                  isSign:false,
                  show: true,
                    count: '',
                    timer: null,
            }
        },
    methods: {
            sendEmail(){
                $.ajax({
                  url:"/api/send_email/",
                  type:"post",
                  headers:{"X-CSRFToken":$.cookie('csrftoken')},
                  data:{
                    user_email:registerVue.registerForm.user_email
                  },
                  success:function (data) {
                    if(data.code=='0') {
                        registerVue.$message.warning(data.msg);
                    }
                  }
                })
                 this.setTime();//异步
            },

        setTime() {
            const TIME_COUNT = 60;
            if (!this.timer) {
                this.count = TIME_COUNT;
                this.show = false;
                this.timer = setInterval(() => {
                    if (this.count > 0 && this.count <= TIME_COUNT) {
                        this.count--;
                    } else {
                        this.show = true;
                        clearInterval(this.timer);
                        this.timer = null;
                    }
                }, 1000)
            }
        },

      Register(formName) {
        this.$refs[formName].validate((valid) => {
          if (valid) {
           $.ajax({
              url:"/api/register/",
              type:"POST",
              headers:{"X-CSRFToken":$.cookie('csrftoken')},
              {#data: $('#demo-loginForm').serialize(),//提示错误#}
              {#data:vm.selected,#}
              data:{user_password:registerVue.registerForm.password,user_email:registerVue.registerForm.user_email,user_phone:registerVue.registerForm.user_phone,user_type:registerVue.registerForm.user_type,code:registerVue.registerForm.code},
              dataType:'JSON',
              success:function (data) {
                  if (data.status === "successful")
                  {
                      if(data.user_type==='2'){
                          window.location.href='http://localhost:8000/api/companyForm/';
                      }
                      if(data.user_type=='1'){
                          window.location.href='http://localhost:8000/api/hunter_add/';
                      }
                      if(data.user_type=='3'){

                          window.location.href='http://localhost:8000/api/admin_index/';
                      }
                      {#else{#}
                      {#    window.location.href='api/login/';#}


                  }
                  else if(data.status === "warning"){
                        registerVue.$message.warning(data.errs);
                  }
                  else {
                      var error_list=JSON.parse(data.errs);
                      console.log(error_list)
                      var msg=''
                      for (let key in error_list){
                          msg=msg+key+error_list[key][0].message+";"
                      }
                      registerVue.$message.warning(msg);
                  }
              }
           })
          }
          else {
            this.$message.error('注册失败');
            return false;
          }
        });
      },
      resetRegisterForm(formName) {
        this.$refs[formName].resetFields();
      },
        toLogin(){
          this.isSign=false;
          loginVue.isLogin=true;
        }
        },

        delimiters: ['[[', ']]']//Django模板与Vue.js 冲突/ 这句可以指定 {[ ]} 为插值表达式的新符号

     })
</script>


</body>
</html>